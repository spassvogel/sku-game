{"version":3,"sources":["constants/tiledMapData.ts","components/pixi/RectTileLayer.tsx","reducers/wmsReducer.ts","components/Tilemap.tsx","reducers/gameStateReducer.ts","reducers/pickingListsReducer.ts","reducers/warehouseReducer.ts","appState.ts","reducers/statusTextReducer.ts","reducers/mutedReducer.ts","reducers/timeReducer.ts","components/context/AppProvider.tsx","constants/gameSettings.ts","components/pixi/Box.tsx","components/pixi/Guy.tsx","components/pixi/SpriteAnimated.tsx","components/pixi/WarehouseGuy.tsx","components/Scene.tsx","components/ui/IPad/content/SKUProfile.tsx","components/ui/IPad/content/PickingLists.tsx","components/ui/IPad/index.tsx","components/ui/StartButton.tsx","components/ui/StatusText.tsx","components/ui/Settings/index.tsx","components/ui/GameOverScreen/index.tsx","components/ui/IntroScreen/index.tsx","components/playerBridge/style/close.svg","components/playerBridge/index.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["TiledLayerType","Orientation","RenderOrder","window","PIXI","Categories","RectTileLayer","PixiComponent","create","props","require","tilemap","CompositeRectTileLayer","texture","applyProps","instance","oldProps","layer","tileset","horizontalTiles","spritesheet","data","i","length","w","tilewidth","h","tileheight","x","y","Math","floor","spriteId","name","addFrame","textures","Tilemap","basePath","setObjects","setWallLocations","useState","layers","setLayers","debug","useEffect","spritesheetData","parseSpritesheetData","getTileset","from","image","baseTexture","wallLocations","parse","filter","visible","map","properties","some","p","value","addAllTilesInLayerToList","width","createTileLayer","objectLayer","find","type","objectgroup","objects","reduce","acc","location","mapData","tilesets","Error","console","warn","source","key","columns","frames","tilecount","frame","spriteSourceSize","rotated","trimmed","sourceSize","meta","size","imagewidth","imageheight","scale","list","tile","index","push","GameState","wmsReducer","state","action","wms","initialWMSState","category","A","productCode","description","pair","B","C","D","pickingListsReducer","pickingLists","pL","orderNo","guy","pickedProducts","complete","undefined","generateBoxLocationsAtDock","wmsState","products","sort","random","initialWarehouseState","boxes","warehouseReducer","zone","initial","gameStateReducer","intro","placingBoxes","pickingBoxes","initialState","statusText","gameState","toString","slice","warehouse","muted","localStorage","getItem","time","statusTextReducer","text","mutedReducer","setItem","timeReducer","performance","now","start","AppContext","createContext","dispatch","reducer","AppProvider","children","useReducer","Provider","CategoryColors","PixiPlugin","registerPIXI","gsap","registerPlugin","Box","tileWidth","tileHeight","behindWall","selected","ref","useRef","imgRef","dragRef","offset","useMemo","onDragStart","event","current","currentTarget","zIndex","stopPropagation","onClick","getLocalPosition","onDragEnd","onReleased","onDragMove","parentPos","parent","position","onDragged","img","process","mousedown","touchstart","mouseup","mouseupoutside","touchend","mousemove","touchmove","draw","graphics","color","product","clear","lineStyle","drawRect","endFill","anchor","alpha","newProps","applyDefaultProps","gotoAndPlay","Guy","forwardRef","atlas","carryBox","containerProps","setFrames","right","orientation","setOrientation","app","useApp","lastPositionPoint","useTick","currentPosition","lastPosition","equals","angle","atan2","PI","front","left","back","clone","loader","onComplete","once","allFrames","resources","indexedTextures","Object","keys","animation","substring","loading","add","load","animationFrames","SpriteAnimated","animationSpeed","isPlaying","memo","convertLocation","pickingList","aStar","homeLocation","tileSize","getProductLocation","guyProps","guyRef","setCarryBox","lastLocation","currentDestination","includes","destination","killTweensOf","tl","timeline","pathStartLocation","far","path","findPath","forEach","loc","to","ease","Linear","easeNone","pixi","duration","delay","endLocation","Scene","height","restProps","useContext","setMapData","selectedBox","setSelectedBox","jsonPath","substr","lastIndexOf","sound","stop","play","getObject","useCallback","pointToSceneLocation","point","getBoxNameAtLocation","entry","entries","box","locationIsBlocked","l","matrix","row","blocked","AStarFinder","grid","diagonalAllowed","includeStartNode","heuristic","weight","pickingList1","setPickingList1","pickingList2","setPickingList2","pickingList3","setPickingList3","nextPickingList1","nextPickingList2","nextPickingList3","interactive","hitArea","sortableChildren","wmsData","d","onProductClick","handleClick","global","object","tint","otherBoxName","setTint","handleDragged","originX","originY","handleBoxDragEnd","isNorthOfWall","obj","ghost","c","wL","SKUProfile","tableRef","table","querySelectorAll","selectedProduct","classList","scrollIntoView","block","remove","renderRow","categoryClasses","data-code","className","colSpan","PickingLists","productNameMap","renderPickingList","pList","renderProduct","completed","IPad","style","backgroundImage","renderContent","StartButton","values","b","reload","StatusText","timeout","setInterval","clearTimeout","progressBarWidth","min","progressColor","backgroundColor","formatTime","ms","seconds","hours","minutes","padLeft","toFixed","padStart","input","Settings","cheat","onChange","e","target","checked","show","setShow","setTimeout","totalScore","pairs","indexOf","getProductRow","display","correct","total","points","location1","location2","abs","getPairRow","mistakes","getBinRow","src","alt","_extends","assign","arguments","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","cx","cy","r","_ref5","transform","_ref6","_ref7","_ref8","x1","y1","x2","y2","_ref9","_ref","svgRef","title","viewBox","ForwardRef","PlayerBridge","gameDataReceived","send","payload","webkit","stringifiedMessageObj","JSON","stringify","messageHandlers","cordova_iab","postMessage","REACT_APP_PLAYER_MODE","setGameData","gameData","GAMEDATA","getGameData","addEventListener","msg","App","setSelectedProduct","resize","innerWidth","innerHeight","removeEventListener","AppAwareBridge","content","Boolean","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.ed029611.chunk.js","sourcesContent":["export interface TiledMapData {\n  width: number;\n  height: number;\n  tilewidth: number;\n  tileheight: number;\n  infinite: boolean;\n  backgroundcolor: string | null;\n  orientation: Orientation;\n  renderorder: RenderOrder;\n  tilesets: TiledTilesetData[];\n  layers: TiledLayerData[];\n}\n\nexport interface TiledTilesetData {\n  columns: number;\n  firstgid: number;\n  source: string;\n  image: string;\n  imagewidth: number;\n  imageheight: number;\n  tilewidth: number;\n  tileheight: number;\n  tilecount: number;\n  name: string;\n  margin: number; // todo: \n  spacing: number; // todo\n  tiles?: TileData[];\n}\n\nexport interface TileData {\n  id: number,\n  properties?: TiledProperty[];\n}\n\nexport interface TiledLayerData {\n  data: number[];\n  objects: TiledObjectData[];\n  type: TiledLayerType;\n  height: number;\n  id: number;\n  name: string;\n  opacity: number; // not supported atm\n  visible: boolean;\n  x: number;\n  y: number;\n  width: number;\n  properties?: TiledProperty[];  \n}\n\nexport interface TiledObjectData {\n  gid: number;\n  id: number;\n  name: string;\n  properties?: TiledProperty[];  \n  type: string;\n  visible: boolean;\n  width: number;\n  height: number;\n  x: number;\n  y: number;\n}\n\nexport enum TiledLayerType {\n    tilelayer = \"tilelayer\",\n    objectgroup = \"objectgroup\"\n}\n\nexport interface TiledProperty {\n  name: string,\n  type: string,\n  value: any\n}\n\nenum Orientation {\n  orthagonal = \"orthagonal\",\n  isometric = \"isometric\",\n  staggered = \"staggered\",\n  hexagonal = \"hexagonal\"\n}\n\nenum RenderOrder {\n  rightUp = \"right-up\",\n  rightDown = \"right-down\",\n  leftUp = \"left-up\",\n  leftDown = \"left-down\"\n}\n\n\n","import { PixiComponent } from \"@inlet/react-pixi\";\nimport * as PIXI  from 'pixi.js';\nimport { TiledLayerData, TiledTilesetData } from 'constants/tiledMapData';\n\nwindow.PIXI = PIXI;\n\ninterface Props  {\n  texture: PIXI.Texture;\n  horizontalTiles: number;\n  layer: TiledLayerData;\n  tileset: TiledTilesetData;\n  spritesheet: PIXI.Spritesheet;\n};\n\nconst RectTileLayer = PixiComponent<Props, any>(\"RectTileLayer\", {\n  create(props: Props) {    \n    require('pixi-tilemap');    \n    var tileLayer = new window.PIXI.tilemap.CompositeRectTileLayer(0, [props.texture]);\n    return tileLayer;\n  },\n\n  applyProps(instance, oldProps: Props, props: Props) {\n    const {layer, tileset, horizontalTiles,spritesheet} = props;\n    if (!layer.data) {\n      return;\n    }\n    for (let i = 0; i < layer.data.length; i++) {\n      const w = tileset.tilewidth;\n      const h = tileset.tileheight;\n      const x = (i % horizontalTiles) * w;\n      const y = Math.floor(i / horizontalTiles) * h;\n    \n      if (layer.data[i] > 0) {\n        const spriteId = `${tileset.name}-${layer.data[i]}`;\n        instance.addFrame(spritesheet.textures[spriteId], x, y);\n      }\n    }\n  }\n});\n\nexport default RectTileLayer;\n\n","\nexport enum Categories {\n  A = \"A\", //these get compared to the zones in the tilemap\n  B = \"B\",\n  C = \"C\",\n  D = \"D\"\n}\n\nexport type WMSAction =\n | { type: 'setWMS', wms: WMSData[] };\n\n\nexport const wmsReducer = (state: WMSData[], action: WMSAction ) => {\n  switch (action.type) {\n    case 'setWMS':\n      return action.wms;\n    default:\n      return state;\n  }\n}\n\nexport interface WMSData {\n  category: Categories;\n  productCode: string;\n  description: string; \n  pair?: string;\n}\n\nexport const initialWMSState = [{\n  category: Categories.A,\n  productCode: \"IRN 590\",\n  description: \"Clothes iron\",\n}, {\n  category: Categories.A,\n  productCode: \"CAM 679\",\n  description: \"Digital camera\",\n}, {\n  category: Categories.A,\n  productCode: \"SMK 019\",\n  description: \"Smoke detector\",\n  pair: \"BAT 917\"\n}, {\n  category: Categories.A,\n  productCode: \"BAT 917\",\n  description: \"Battery charger\",\n  pair: \"SMK 019\"\n}, {\n  category: Categories.B,\n  productCode: \"VRL 444\",\n  description: \"VR headset\",\n}, {\n  category: Categories.B,\n  productCode: \"PTV 555\",\n  description: \"Plasma TV\",\n  pair: \"SPK 876\"\n}, {\n  category: Categories.B,\n  productCode: \"SPK 876\",\n  description: \"Speaker system\",\n  pair: \"PTV 555\"\n}, {\n  category: Categories.C,\n  productCode: \"WSH 322\",\n  description: \"Washing machine\",\n}, {\n  category: Categories.C,\n  productCode: \"RFG 411\",\n  description: \"Refrigerator\",\n}, {\n  category: Categories.C,\n  productCode: \"SMX 041\",\n  description: \"Stand mixer\",\n}, {\n  category: Categories.D,\n  productCode: \"TPH 255\",\n  description: \"Telephone\",\n}, {\n  category: Categories.D,\n  productCode: \"CST 964\",\n  description: \"Cassette player\",\n}]","import React, { useState } from 'react';\nimport { TiledMapData, TiledLayerData, TiledTilesetData, TiledLayerType, TiledObjectData } from 'constants/tiledMapData';\nimport { Container, Text, Graphics } from '@inlet/react-pixi';\nimport { useEffect } from 'react';\nimport { SpritesheetData, SpriteData } from 'constants/spritesheetData';\nimport RectTileLayer from 'components/pixi/RectTileLayer';\nimport * as PIXI from 'pixi.js';\n\ninterface Props {\n  basePath: string;\n  data: TiledMapData;\n  setObjects: (data: {[key: string]: TiledObjectData}) => void;\n  setWallLocations: (tiles: [number, number][]) => void;\n}\n\nconst DEBUG = false;\n\nconst Tilemap = (props: Props) => {\n  const {\n    basePath, \n    data, \n    setObjects,\n    setWallLocations\n  } = props;\n  const [layers, setLayers] = useState<JSX.Element[]>();\n  const [debug, setDebug] = useState<JSX.Element[]>();\n\n  useEffect(() => {\n    const spritesheetData = parseSpritesheetData(data);\n    const tileset = getTileset(data);\n\n    const texture = PIXI.Texture.from(`${basePath}/${tileset.image}`);\n    const baseTexture = PIXI.BaseTexture.from(`${basePath}/${tileset.image}`);\n    const spritesheet = new PIXI.Spritesheet(baseTexture, spritesheetData);\n    const wallLocations: [number, number][] = [];\n\n    spritesheet.parse(() => {\n      const layers = data.layers.filter(layer => layer.visible).map(layer => {\n\n        // walls are marked on the tileset with property 'wall'\n        if (layer.properties && layer.properties.some(p => p.name === 'wall' && p.value === true)){\n          addAllTilesInLayerToList(wallLocations, layer, layer.width);\n        }\n        \n        return createTileLayer(layer, texture, data.width, tileset, spritesheet);\n      });\n\n      const objectLayer = data.layers.find(layer => layer.type === TiledLayerType.objectgroup);\n      if (objectLayer) {\n    \n        const objects: { [key: string]: TiledObjectData } = objectLayer.objects.reduce((acc: {[key: string]: TiledObjectData}, value: TiledObjectData) => {\n          const {x, y} = value;\n          const location = [\n            x / data.tilewidth, \n            y / data.tileheight - 1\n          ];\n          acc[`${location[0]},${location[1]}`] = value;\n          return acc;\n        }, {});\n        setObjects(objects);\n      }\n      setWallLocations(wallLocations);\n      setLayers(layers);\n      \n      if (DEBUG){\n        setDebug(getDebug(data.layers[0].data.length, data.layers[0].width, tileset.tilewidth, tileset.tileheight, wallLocations))\n      }\n    });\n\n  }, [basePath, data, setObjects, setWallLocations]);\n  return (\n    <Container >\n      {layers}\n      {debug}\n    </Container>\n  );\n}\n\nexport default Tilemap;\n\nconst getDebug = (tileCount: number, columns: number, tileWidth: number, tileHeight: number, blockedTiles: number[][]) => {\n  const elements = [];\n  for (let i = 0 ; i < tileCount ; i++) {\n    const location = [(i % columns),  Math.floor(i / columns)];\n    const x = location[0] * tileWidth;\n    const y = location[1] * tileHeight;\n    var style = {\n      fontSize: 12,\n      align: 'center',\n      fill : '0x0',\n      strokeThickness : 1,\n      wordWrap : true,\n      wordWrapWidth : 440\n    };\n    // tile index\n    // elements.push(<Text key={`${x},${y}`} style={style} text={`${i}`} x={x} y={y}/>);\n\n    // tile location\n    elements.push(<Text key={`${x},${y}`} style={style} text={`[${location[0]},${location[1]}]`} x={x} y={y}/>);\n\n    // // blocked\n    elements.push(<Graphics\n      key={`blocked_${x},${y}`}\n      x={x} y={y}\n      draw={graphics => {\n        const line = 1;\n        const blocked = blockedTiles.some((loc) => loc[0] === location[0] && loc[1] === location[1]);\n        const color = blocked ? 0xFF3300 : 0x00FF00;\n        graphics.lineStyle(line, color);\n        graphics.drawRect(line / 2, line / 2, tileWidth - line / 2, tileHeight - line / 2);\n        graphics.endFill();\n      }}\n    />)\n  }\n  return elements;\n}\n\nconst getTileset = (mapData: TiledMapData) => {\n  if (!mapData.tilesets.length) {\n    throw new Error(\"No tilesets found! Can't continue\");\n  }\n  if (mapData.tilesets.length > 1) {\n    console.warn(\"Found more than one tileset. But we currently only support one.\");\n  }\n  if (mapData.tilesets[0].source) {\n    throw new Error(\"Please embed tilemaps in Tiled! Can't continue\");\n  }\n  return mapData.tilesets[0];\n}\n\nconst createTileLayer = (layer: TiledLayerData, texture: PIXI.Texture, horizontalTiles: number, tileset: TiledTilesetData, spritesheet: PIXI.Spritesheet) => {\n  return (\n    <RectTileLayer\n      key={layer.name}\n      texture={texture} \n      layer={layer} \n      horizontalTiles={horizontalTiles}\n      tileset={tileset}\n      spritesheet={spritesheet}\n    />\n  );\n}\n\nconst parseSpritesheetData = (mapData: TiledMapData): SpritesheetData => {\n  const tileset = getTileset(mapData);\n  const columns = tileset.columns;\n\n  const frames: { [name: string]: SpriteData } = {};\n  for (let i = 0; i < tileset.tilecount; i++) {\n    const w = tileset.tilewidth;\n    const h = tileset.tileheight;\n    const x = (i % columns) * w;\n    const y = Math.floor(i / columns) * h;\n\n    frames[`${tileset.name}-${i + 1}`] = { \n      frame: {x, y, w, h},\n      spriteSourceSize: {x, y, w, h},\n      rotated: false,\n      trimmed: false,\n      sourceSize: { w, h}\n    };\n  }\n  const image = tileset.image;\n  const size = { w: tileset.imagewidth, h: tileset.imageheight };\n  return {\n    frames,\n    meta: {\n      image,\n      size,\n      scale: 1\n    }\n  };\n}\n\n/** Add tiles in this layer to list */\nconst addAllTilesInLayerToList = (list: [number, number][], layer: TiledLayerData, columns: number) => {\n  layer.data.reduce((acc: [number, number][], tile, index) => {\n    if (tile > 0) {\n      const x = (index % columns);\n      const y = Math.floor(index / columns);\n      acc.push([x, y]);  \n    }\n    return acc;\n  }, list);\n}","\nexport enum GameState {\n  intro,\n  placingBoxes,\n  pickingBoxes,\n  complete,\n}\n\nexport type GameStateAction =\n | { type: 'intro'}\n | { type: 'startGame'}\n | { type: 'startPicking' }\n | { type: 'completeGame' }\n | { type: 'restart' };\n\nexport const gameStateReducer = (state: GameState, action: GameStateAction ) => {\n  switch (action.type) {\n    case 'intro':\n      return GameState.intro;\n    case 'startGame':\n      return GameState.placingBoxes;\n    case 'startPicking':\n      return GameState.pickingBoxes;\n    case 'completeGame':\n      return GameState.complete;\n    case 'restart':\n      return GameState.placingBoxes;\n    default:\n      return state;\n  }\n}","\nexport interface PickingList {\n  products: string[];\n  pickedProducts?: string[]; // when a product from `product` is picked it appears in this list\n  guy?: number;               // who is currently picking this list\n  complete?: boolean;        // when list is completely picked and the picker has returnwed with all the items \n  // clientName? \n  orderNo: string;\n}\n\nexport const initialProductPickingList = [\n  [\"IRN 590\", \"CAM 679\"],\n  [\"CAM 679\", \"VRL 444\", \"IRN 590\"],\n  [\"RFG 411\", \"IRN 590\", \"CAM 679\"],\n  [\"VRL 444\", \"SMK 019\", \"BAT 917\", \"SPK 876\", \"PTV 555\"],\n  [\"SMX 041\", \"PTV 555\", \"SPK 876\", \"CAM 679\"],\n  [\"BAT 917\", \"SMK 019\", \"IRN 590\", \"WSH 322\"]\n];\n\n\n\nexport const generateInitialPickingLists = (initial: string[][]): PickingList[] => {\n  // the actual products are not random, but the rest of the data is\n  return initial.map(products => {\n    return {\n      orderNo: Math.random().toString().slice(2, 9),\n      products\n    } \n  });\n}\n\nexport type PickingListsAction =\n | { type: 'setPickingLists', pickingLists: PickingList[] }\n | { type: 'startPicking', guy: number, orderNo: string }\n | { type: 'completeProductPick', productCode: string, orderNo: string }\n | { type: 'completeOrder', orderNo: string }\n | { type: 'restart' };\n\n \nexport const pickingListsReducer = (state: PickingList[], action: PickingListsAction ) => {\n  switch (action.type) {\n    case 'setPickingLists':\n      return action.pickingLists;\n    case 'startPicking':\n      return state.map(pL => {\n        if (pL.orderNo === action.orderNo) {\n          return { \n            ...pL,\n            guy: action.guy\n          }\n        }\n        return pL;\n      })\n    case 'completeProductPick':\n      return state.map(pL => {\n        if (pL.orderNo === action.orderNo) {\n          return { \n            ...pL,\n            pickedProducts: [ \n              ...pL.pickedProducts || [], \n              action.productCode\n            ]\n          }\n        }\n        return pL;\n      })\n    case 'completeOrder':\n      return state.map(pL => {\n        if (pL.orderNo === action.orderNo) {\n          return { \n            ...pL,\n            complete: true\n          }\n        }\n        return pL;\n      });\n    case 'restart':\n      return state.map(pL => ({\n        ...pL,\n        guy: undefined,\n        complete: false,\n        pickedProducts: []\n      }));\n    default:\n      return state;\n  }\n}","import { initialWMSState, WMSData } from \"./wmsReducer\";\n\nexport interface BoxState {\n  location: [number, number];\n  zone?: string; // A-C: in rack, D: trash, undefined: dock\n}\n\nexport interface WarehouseState {\n  boxes: { [id: string]: BoxState }\n}\n\nexport const generateBoxLocationsAtDock = (wmsState: WMSData[]) => {\n  const products = wmsState.map(p => p.productCode);\n  products.sort(() => (0.5 - Math.random()));\n  return products.reduce((acc: { [id: string]: BoxState }, value: string, index: number) => {\n    acc[value] = { \n      location: [8 + index, 1]\n    }\n    return acc;\n  }, {});\n}\n\n// Use this for debugging. It shows a warehouse where all the boxes are placed\nconst generateBoxLocationsAtRacks = () => {\n  const products = initialWMSState.map(p => p.productCode);\n  products.sort(() => (0.5 - Math.random()));\n  const rackLocations: [number, number][] = [\n    [3, 9],\n    [4, 9],\n    [5, 9],\n    [7, 9],\n    [8, 9],\n    [9, 9],\n    [11, 9],\n    [12, 9],\n    [13, 9],\n    [15, 9],\n    [16, 9],\n    [17, 9],\n    [3, 6],\n    [4, 6],\n    [5, 6],\n    [7, 6],\n    [8, 6],\n    [9, 6],\n    [11, 6],\n    [12, 6],\n    [13, 6],\n    [15, 9],\n  ];\n\n  return products.reduce((acc: { [id: string]: BoxState }, value: string, index: number) => {\n    acc[value] = { \n      location: rackLocations[index],\n      zone: \"A\"\n    }\n    return acc;\n  }, {});\n}\n\nconst generateBadBoxLocations = (): { [id: string]: BoxState } => {\n  const inRack = true;\n  return {\n    \"CST 964\": { location: [9, 9] },\n    \"TPH 255\": { location: [8, 9] },\n    \"DSC 743\": { location: [7, 9] },\n    \"SMX 041\": { location: [5, 9] },\n    \"RFG 411\": { location: [4, 9] },\n    \"WSH 322\": { location: [11, 9] },\n    \"MIC 099\": { location: [12, 9] },\n    \"OTV 482\": { location: [13, 9] },\n    \"MWO 901\": { location: [15, 9] },\n    \"SPK 876\": { location: [16, 9] },\n    \"PTV 555\": { location: [4, 6] },\n    \"VIR 555\": { location: [5, 6] },\n    \"BAT 917\": { location: [7, 6] },\n    \"VAC 082\": { location: [8, 6] },\n    \"DLA 413\": { location: [9, 6] },\n    \"SMK 019\": { location: [11, 6] },\n    \"BAM 223\": { location: [12, 6] },\n    \"CAM 679\": { location: [13, 6] },\n    \"IRN 590\": { location: [15, 6] },\n  };\n}\nconst generateGoodBoxLocations = (): { [id: string]: BoxState } => {\n  \n  return {\n    // fast movers\n    \"IRN 590\": { location: [16, 8], zone: \"A\" },\n    \"CAM 679\": { location: [17, 8], zone: \"A\" },\n    \"BAT 917\": { location: [16, 6], zone: \"A\" },\n    \"SMK 019\": { location: [17, 6], zone: \"A\" },\n\n    // medium movers\n    \"VRL 444\": { location: [11, 8], zone: \"B\" },    \n    \"PTV 555\": { location: [11, 6], zone: \"B\" },\n    \"SPK 876\": { location: [12, 6], zone: \"B\" },\n\n    // slow movers\n    \"WSH 322\": { location: [6, 8], zone: \"C\" },\n    \"SMX 041\": { location: [7, 8], zone: \"C\" },\n    \"RFG 411\": { location: [6, 6], zone: \"C\" },\n\n    // non movers (trash)\n    \"TPH 255\": { location: [1, 6], zone: \"D\" },\n    \"CST 964\": { location: [1, 8], zone: \"D\"},\n  };\n}\n\nexport const initialWarehouseState: WarehouseState = {\n  boxes: generateBoxLocationsAtDock(initialWMSState)\n  // boxes: generateBoxLocationsAtRacks()\n  // boxes: generateBadBoxLocations()\n  // boxes: generateGoodBoxLocations()\n}\n\n\nexport type WarehouseAction =\n | { type: 'placeBox'; productCode: string, location: [number, number], zone?: string }\n | { type: 'restart' }\n | { type: 'cheat' };\n\nexport const warehouseReducer = (state: WarehouseState, action: WarehouseAction, wmsState: WMSData[]) => {\n  switch (action.type) {\n    case 'cheat': {\n      return { boxes: generateGoodBoxLocations() };\n    }\n    case 'placeBox':\n      const { location, zone } = action; \n      const boxes = { \n        ...state.boxes,\n        [action.productCode]: {\n            ...state.boxes[action.productCode],\n            location,\n            zone,\n        }\n      }\n      return { \n        ...state,\n        boxes\n      } ;\n    case 'restart':\n      return {\n        boxes: generateBoxLocationsAtDock(wmsState)\n      };  \n    default: {\n        return state;\n    }\n  }\n}\n\n","import { initialWMSState, WMSData } from \"reducers/wmsReducer\";\nimport { generateInitialPickingLists, PickingList, initialProductPickingList } from \"reducers/pickingListsReducer\";\nimport { initialWarehouseState, WarehouseState } from \"reducers/warehouseReducer\";\nimport { GameState } from \"reducers/gameStateReducer\";\n\nexport interface AppState {\n  statusText: string;\n  gameState: GameState,\n  wms: WMSData[];\n  pickingLists: PickingList[];\n  warehouse: WarehouseState; // Where all the boxes are in the warehouse\n  muted: boolean;\n  time: number;\n}\n\n\nexport const initialState: AppState = {\n  statusText: \"\",\n  gameState: GameState.intro,\n  wms: initialWMSState,\n  pickingLists: generateInitialPickingLists(initialProductPickingList),\n  warehouse: initialWarehouseState,\n  muted: localStorage.getItem('muted') === 'true',\n  time: 0,\n}\n\n","export type StatusTextAction =\n | { type: 'setStatusText', text: string };\n\n\nexport const statusTextReducer = (state: string, action: StatusTextAction ) => {\n  switch (action.type) {\n    case 'setStatusText':\n      return action.text;\n    default:\n      return state;\n  }\n}","export type MutedReducerAction =\n | { type: 'setMuted', value: boolean };\n\n\nexport const mutedReducer = (state: boolean, action: MutedReducerAction ) => {\n  switch (action.type) {\n    case 'setMuted':\n      localStorage.setItem('muted', action.value ? 'true' : 'false');\n      return action.value;\n    default:\n      return state;\n  }\n}","export type TimeReducerAction =\n | { type: 'tick', start: number };\n\n\nexport const timeReducer = (state: number, action: TimeReducerAction ) => {\n  switch (action.type) {\n    case 'tick':\n      return (performance.now() - action.start);\n    default:\n      return state;\n  }\n}","import React, { createContext, useReducer } from 'react';\nimport { AppState, initialState } from 'appState';\nimport { gameStateReducer, GameStateAction } from 'reducers/gameStateReducer';\nimport { warehouseReducer, WarehouseAction } from 'reducers/warehouseReducer';\nimport { statusTextReducer, StatusTextAction } from 'reducers/statusTextReducer';\nimport { PickingListsAction, pickingListsReducer } from 'reducers/pickingListsReducer';\nimport { mutedReducer, MutedReducerAction } from 'reducers/mutedReducer';\nimport { TimeReducerAction, timeReducer } from 'reducers/timeReducer';\nimport { wmsReducer, WMSAction } from 'reducers/wmsReducer';\n\n\nconst AppContext = createContext<{\n  state: AppState;\n  dispatch: React.Dispatch<AnyAction>;\n}>({\n  state: initialState,\n  dispatch: () => null\n});\n\n\nexport type AnyAction = GameStateAction\n | WMSAction\n | WarehouseAction\n | StatusTextAction\n | PickingListsAction \n | MutedReducerAction\n | TimeReducerAction;\n\nconst reducer = (state: AppState, action: AnyAction) => {\n  return {\n    gameState: gameStateReducer(state.gameState, action as GameStateAction),\n    statusText: statusTextReducer(state.statusText, action as StatusTextAction),\n    wms: wmsReducer(state.wms, action as WMSAction),\n    pickingLists: pickingListsReducer(state.pickingLists, action as PickingListsAction), \n    warehouse: warehouseReducer(state.warehouse, action as WarehouseAction, state.wms),\n    muted: mutedReducer(state.muted, action as MutedReducerAction), // todo: settingsreducer?\n    time: timeReducer(state.time, action as TimeReducerAction)    \n  };\n};\n\nconst AppProvider: React.FC = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  return (\n    <AppContext.Provider value={{state, dispatch}}>\n      {children}\n    </AppContext.Provider>\n  )\n}\n\nexport { AppContext, AppProvider };","import { Categories } from \"reducers/wmsReducer\";\n\nexport const SPEED_MULTIPLIER = 10;\n\nexport const CategoryColors = {\n  [Categories.A]: 0xeb3223,\n  [Categories.B]: 0x254683,\n  [Categories.C]: 0xf2bd42,\n  [Categories.D]: 0xb7b7b7,\n}","import React, { useRef,  useMemo } from 'react';\nimport { Sprite, Graphics, Container } from '@inlet/react-pixi';\nimport * as PIXI from 'pixi.js';\nimport { PixiPlugin } from 'gsap/all';\nimport { gsap } from 'gsap'\nimport { WMSData } from 'reducers/wmsReducer';\nimport { CategoryColors } from 'constants/gameSettings';\n\nPixiPlugin.registerPIXI(PIXI);\ngsap.registerPlugin(PixiPlugin);\n\ninterface Props {\n  position?: PIXI.Point;\n  location?: [number, number];\n  product: WMSData;\n  tileWidth: number;\n  tileHeight: number;\n  selected: boolean;\n  behindWall?: boolean;\n  onClick?: (event: PIXI.interaction.InteractionEvent) => void;\n  onDragged?: (event: PIXI.interaction.InteractionEvent) => void;\n  onReleased?: (event: PIXI.interaction.InteractionEvent) => void;\n  delay?: number; // Wait this long before showing\n}\n\n\nconst Box = (props: Props & React.ComponentProps<typeof Container>) => {\n  const {\n    location = [0, 0],\n    tileWidth = 0, \n    tileHeight = 0,\n    behindWall,\n    selected\n  } = props;\n  const ref = useRef<PIXI.Container>(null);\n  const imgRef = useRef<PIXI.Sprite>(null);\n  const dragRef = useRef<PIXI.Sprite>(null);\n  const offset = useRef<PIXI.Point>();\n  const data = useRef<PIXI.interaction.InteractionData>();\n\n  const {x, y} = useMemo(() => {\n    return { \n      x: location[0] * tileWidth,\n      y: location[1] * tileHeight,\n    };\n  }, [location, tileWidth, tileHeight]);\n  \n  const onDragStart = (event: PIXI.interaction.InteractionEvent) => {\n    data.current = event.data;\n    event.currentTarget.zIndex = 6;\n    event.stopPropagation(); \n    if (props.onClick) props.onClick(event);\n\n    offset.current = data.current.getLocalPosition(ref.current!);\n\n    imgRef.current!.visible = false;\n    dragRef.current!.visible = true;\n  }\n  \n  const onDragEnd = (event: PIXI.interaction.InteractionEvent) => {\n    if (props.behindWall) {\n      event.currentTarget.zIndex = 3;\n    } else {\n      event.currentTarget.zIndex = 1;\n    }\n    data.current = undefined;\n\n    if (props.onReleased) props.onReleased(event);\n    imgRef.current!.visible = true;\n    dragRef.current!.visible = false;\n\n  }\n  \n  const onDragMove = (event: PIXI.interaction.InteractionEvent) => {\n    if (data.current && ref.current){\n      const parentPos = data.current.getLocalPosition(ref.current!.parent);\n      const position = new PIXI.Point(parentPos.x - offset.current!.x, parentPos.y - offset.current!.y);\n\n      ref.current!.position = position;\n      if (props.onDragged) props.onDragged(event);\n    }\n  }\n\n  const img = `${process.env.PUBLIC_URL}/images/box1${ props.behindWall ? 'b' : ''}.png`;\n\n  return (\n    <Container\n      { ...props }\n      x={x}\n      y={y}\n      ref={ref}\n      zIndex={(props.behindWall) ? 3 : 1} // boxes in front: 1, guy: 2, boxes in back: 3\n      mousedown={onDragStart}\n      touchstart={onDragStart}\n      mouseup={onDragEnd}\n      mouseupoutside={onDragEnd}\n      touchend={onDragEnd}\n      mousemove={onDragMove}\n      touchmove={onDragMove}\n    >\n      {selected && (\n        <Graphics draw={(graphics:PIXI.Graphics) => {\n            const line = 2;\n            const color = CategoryColors[props.product.category];\n            // const color = 0xbada55;\n            graphics.clear();\n            graphics.lineStyle(line, color);\n            if (behindWall) {\n              graphics.drawRect(2, tileHeight / 2 - 1, tileWidth - 4, tileHeight / 2 + 2 );\n            }\n            else {\n              graphics.drawRect(2, -tileHeight / 2 - 1, tileWidth - 4, tileHeight + 2 );\n            }\n            graphics.endFill();\n          }}\n        />\n      )}\n      <Sprite \n        anchor={behindWall ? [0, -0.5] : [0, 0.5]}\n        image={img}\n        ref={imgRef}\n      />        \n      <Sprite \n        name=\"ghost\"\n        anchor={behindWall ? [0, -0.5] : [0, 0.5]}\n        alpha={0.9}\n        image={`${process.env.PUBLIC_URL}/images/box1.png`}\n        ref={dragRef}\n        visible={false}\n      />        \n    </Container>\n  );\n}\n\nexport default Box;\n\n","import React, { useState, useEffect, forwardRef, useRef, memo } from 'react';\nimport { useApp, useTick, Container, Text } from \"@inlet/react-pixi\";\nimport * as PIXI from 'pixi.js';\nimport SpriteAnimated from './SpriteAnimated';\n\nexport enum Orientation {\n  front = 'front',\n  left = 'left',\n  right = 'right',\n  back = 'back',\n}\n\ninterface Props {\n  atlas: string;\n  carryBox: boolean;\n}\n\nconst DEBUG = false;\n//\nconst Guy = forwardRef<PIXI.Container, any>((props: Props & React.ComponentProps<typeof Container>, ref) => {\n  const {\n    atlas,\n    carryBox,\n    ...containerProps\n  } = props;\n\n  const [frames, setFrames] = useState<{ [key: string]: PIXI.Texture[]}|null>(null);\n\n  const [orientation, setOrientation] = useState<Orientation>(Orientation.right);\n  const app = useApp();\n  const lastPositionPoint = useRef<PIXI.Point>();\n\n  useTick(() => {\n    if (!ref || !(ref as any).current) return;\n    const currentPosition = (ref as any).current.position as PIXI.Point;\n    const lastPosition = lastPositionPoint.current;\n    if (lastPosition && !lastPosition.equals(currentPosition)) {\n      const angle: number = Math.atan2(currentPosition.y - lastPosition.y, currentPosition.x - lastPosition.x);\n      if ((angle >= Math.PI / -4 && angle <= 0) || (angle >= 0 && angle <= Math.PI / 4)) {\n        // going right\n        setOrientation(Orientation.right);     \n      }\n      else if (angle >= Math.PI / 4 && angle <= Math.PI * .75) {\n        // going down\n        setOrientation(Orientation.front);\n      }\n      else if (angle > Math.PI * .75 || angle < Math.PI * -0.75){\n        // going left\n        setOrientation(Orientation.left);\n      } else {\n        // Going up\n        setOrientation(Orientation.back);\n      }\n    }\n    lastPositionPoint.current = currentPosition.clone();\n  });\n\n  useEffect(() => {\n    const loadingComplete = () => {\n      const allFrames = app.loader.resources[atlas].data.frames;\n      const indexedTextures = Object.keys(allFrames).reduce((acc: any, frame: string) => {\n        // frames are in the format of: 'front1', 'front2', 'left-box1' etc\n        // create a mapping keyed by the part without the number\n        const animation = frame.substring(0, frame.length - 1);\n        if (!acc[animation]) {\n          acc[animation] = [];\n        }\n        acc[animation].push(PIXI.Texture.from(frame));\n        return acc;\n      }, {});\n\n      setFrames(indexedTextures);\n    }\n\n    app.loader.onComplete.once(loadingComplete);\n    if (!app.loader.loading) {\n      app.loader.add(atlas).load();\n    }\n    \n  }, [app.loader, app.loader.loading, atlas, props.name]);\n\n  if (!frames) return null;\n  const animationFrames = frames[`${orientation}${carryBox ? '-box': ''}`];\n\n  return (\n    <Container \n      ref={ref}\n      zIndex={2}\n      { ...containerProps}\n    >\n      <SpriteAnimated\n        animationSpeed={0.15}\n        isPlaying={true}\n        textures={animationFrames}\n        anchor={[0, 0.1]}\n      />\n      { DEBUG && (<Text style={{\n        fontSize: 12,\n        align: 'center',\n        fill: '0xfff',\n        strokeThickness: 1,\n        wordWrap : true,\n        wordWrapWidth : 440\n      }}\n      text={`${props.name}`} />\n      )}\n    </Container>\n  )\n});\n\n// const areEqual = (a: React.ComponentProps<typeof Container>, b: React.ComponentProps<typeof Container>) => {\n//   return true;\n// }\nexport default memo(Guy);\n\n","import { PixiComponent, applyDefaultProps, AnimatedSprite } from '@inlet/react-pixi';\nimport * as PIXI from 'pixi.js';\n\nexport default PixiComponent<React.ComponentProps<typeof AnimatedSprite>, PIXI.AnimatedSprite>('SpriteAnimated', {\n  create: ({ textures }) => {\n    const animatedSprite = new PIXI.AnimatedSprite(textures || [], true);\n    return animatedSprite;\n  },\n  applyProps: (instance, oldProps, newProps) => {\n    applyDefaultProps(instance, oldProps, newProps);\n    instance.gotoAndPlay(0);\n  },\n});\n\n\n","import React, { useState, useEffect, useRef, memo } from 'react';\nimport * as PIXI from 'pixi.js';\nimport Guy from './Guy';\nimport { AnyAction } from 'components/context/AppProvider';\nimport { AStarFinder } from 'astar-typescript';\nimport { PickingList } from 'reducers/pickingListsReducer';\nimport { gsap, Linear } from 'gsap'\nimport { PixiPlugin } from 'gsap/all';\nimport { SPEED_MULTIPLIER } from 'constants/gameSettings';\n\nPixiPlugin.registerPIXI(PIXI);\ngsap.registerPlugin(PixiPlugin);\n\ninterface Props {\n  pickingList?: PickingList;\n  homeLocation: [number, number];\n  dispatch: React.Dispatch<AnyAction>;\n  aStar: AStarFinder;\n  getProductLocation: (productCode: string) => { location: [number, number], far: boolean }\n}\n\nconst convertLocation = (location: [number, number]) => {\n  // This is the format AStarFind works with\n  return { x: location[0], y: location[1] }\n}\n//\nconst WarehouseGuy = (props: Props & React.ComponentProps<typeof Guy>) => {\n  const {\n    dispatch,\n    pickingList,\n    aStar,\n    homeLocation,\n    tileSize,\n    getProductLocation,\n    ...guyProps\n  } = props;\n\n  const guyRef = useRef(null);\n  const [carryBox, setCarryBox] = useState<boolean>(false);\n\n  const lastLocation = useRef<[number, number]>(homeLocation); // aStar has to know where this guy starts from\n  const currentDestination = useRef<string>();\n  \n  useEffect(() => {\n    if (!guyRef.current || !pickingList) return;\n\n    const { orderNo, products } = pickingList;\n    \n    //console.log(`[${props.name}] picking list: `, pickingList.products.find(value => !pickedProducts.includes(value)) )\n   \n    const productCode = products.find(value => !(pickingList.pickedProducts || []).includes(value));\n\n    const destination = (productCode || 'home');\n    if (currentDestination.current && (currentDestination.current === destination)) {\n      // if (destination === 'home') console.log(`[${props.name}] was already underway to ${destination} ${productCode} ${currentDestination.current}`)\n      // todo: this is to prevent the guy from starting another animation when another guy picks up a boxes\n      // Would be better to useMemo or something but cba now\n      return;\n    }\n    currentDestination.current = productCode || destination;\n\n    gsap.killTweensOf(guyRef.current);\n    const tl = gsap.timeline();\n    const pathStartLocation = convertLocation(lastLocation.current || homeLocation);\n\n    if (productCode) {\n      // There is a product to pick, go fetch it\n      \n      // Determine the path to this product\n      const {location, far} = getProductLocation(productCode);\n      // console.log(`[${props.name}] We need to pick ${productCode} (${orderNo}). It's location is ${location}. It's${far ? \"\" : \" not\"} far. We start at ${pathStartLocation.x}, ${pathStartLocation.y}}`);\n\n      const path = aStar?.findPath(pathStartLocation, convertLocation(location)) || [];\n      // create animation to walk this path\n      path.forEach((loc: number[]) => {\n        tl.to(guyRef.current, {\n          ease: Linear.easeNone,\n          pixi: { \n            x: loc[0] * tileSize,\n            y: loc[1] * tileSize\n          }, \n          duration: 1 / SPEED_MULTIPLIER + (far ? .035 : 0)  // it takes one second real time to walk one tile\n        });\n      }); \n      tl.to(guyRef.current, {\n        delay: far ? .2 : 0, // We cheat a bit to make the difference bigger. Taking a box from a 'far' location takes half a second longer\n        onComplete: () => { \n          // completed picking product\n          setCarryBox(true);\n          dispatch({ type: 'completeProductPick', productCode, orderNo});\n          //console.log(`[${props.name}] completed picking ${productCode} (${orderNo})`)\n          const endLocation = path[path.length - 1];\n          lastLocation.current = endLocation as [number, number];\n        },\n      })\n    } \n    else {\n      // All done with this order, return home\n      // console.log(`[${props.name}] I guess we are done. Time to return to ${homeLocation}`);\n        \n      // Determine the path home\n      const path = aStar?.findPath(pathStartLocation, convertLocation(homeLocation)) || [];\n      \n      // create animation to walk this path\n      path.forEach((loc: number[]) => {\n        tl.to(guyRef.current, {\n          ease: Linear.easeNone,\n          pixi: { \n            x: loc[0] * tileSize,\n            y: loc[1] * tileSize\n          }, \n          duration: 1 / SPEED_MULTIPLIER\n        });\n      }); \n      tl.to(guyRef.current, {\n        onComplete: () => { \n          // completed picking product\n          setCarryBox(false);\n          lastLocation.current = homeLocation;\n          dispatch({ type: 'completeOrder', orderNo });\n        },\n      })\n    }    \n  }, [aStar, dispatch, getProductLocation, homeLocation, pickingList, tileSize, props.name]);\n  \n  return (\n    <Guy\n      atlas={`${process.env.PUBLIC_URL}/images/sprites/guy/guy.json`} \n      x={homeLocation[0] * tileSize} \n      y={homeLocation[1] * tileSize}\n      carryBox={carryBox}\n      {...guyProps} \n      ref={guyRef} \n    />\n  )\n};\n\n// const areEqual = (a: React.ComponentProps<typeof Container>, b: React.ComponentProps<typeof Container>) => {\n//   return true;\n// }\nexport default memo(WarehouseGuy);\n","import React, { useEffect, useState, useRef, useCallback, useContext, useMemo } from \"react\";\nimport { Container, Stage, Sprite } from '@inlet/react-pixi';\nimport { AStarFinder } from \"astar-typescript\";\nimport { TiledMapData, TiledObjectData } from 'constants/tiledMapData';\nimport Tilemap from './Tilemap';\nimport BridgedStage from \"./pixi/util/BridgedStage\";\nimport { AppContext } from \"./context/AppProvider\";\nimport * as PIXI from 'pixi.js';\nimport Box from \"./pixi/Box\";\nimport { PixiPlugin } from 'gsap/all';\nimport { gsap } from 'gsap'\nimport { GameState } from \"reducers/gameStateReducer\";\nimport WarehouseGuy from \"./pixi/WarehouseGuy\";\nimport sound from 'pixi-sound';\nimport { PickingList } from \"reducers/pickingListsReducer\";\n\nPixiPlugin.registerPIXI(PIXI);\ngsap.registerPlugin(PixiPlugin);\n\nwindow.PIXI = PIXI;\n// eslint-disable-next-line import/first\nimport 'pixi-tilemap'; // tilemap is not a real npm module :/\n\nexport interface Props {\n  tilemap: string;\n  width: number;\n  height: number;\n  onProductClick: (productCode: string) => void;\n}\n\nconst Scene = (props: Props & React.ComponentProps<typeof Container>) => {\n  const {tilemap, width, height, ...restProps} = props;\n  const {state, dispatch} = useContext(AppContext);\n  const {warehouse} = state;\n\n  const [mapData, setMapData] = useState<TiledMapData>();\n  const [objects, setObjects] = useState<{[key: string]: TiledObjectData}>();\n  const [wallLocations, setWallLocations] = useState<[number, number][]>([]);\n  const [selectedBox, setSelectedBox] = useState<string>();\n  const ref = useRef<PIXI.Container>(null);\n\n  const jsonPath = `${process.env.PUBLIC_URL}/${tilemap}`;\n\n  useEffect(() => {\n    new PIXI.Loader().add(jsonPath).load((loader)=>{         \n      const mapData: TiledMapData = loader.resources[jsonPath].data;\n      setMapData(mapData);\n    });\n  }, [jsonPath]);\n\n  const basePath = jsonPath.substr(0, jsonPath.lastIndexOf('/'));\n\n  useEffect(() => {\n    sound.add('snap', `${process.env.PUBLIC_URL}/sound/snap.wav`);    \n    sound.add('whoosh', `${process.env.PUBLIC_URL}/sound/whoosh.mp3`);    \n    sound.add('bennyHill', `${process.env.PUBLIC_URL}/sound/BennyHill.mp3`);    \n  }, []);\n\n  useEffect(() => {\n    if (state.gameState === GameState.pickingBoxes && !state.muted) {\n      sound.play('bennyHill'); \n    } else {\n      sound.stop('bennyHill');\n    }\n  }, [state.gameState, state.muted])\n\n\n  const getObject = useCallback((location: [number, number]) => {\n    return objects?.[`${location[0]},${location[1]}`];\n  }, [objects]);\n\n\n  const getProductLocation = (productCode: string): { location: [number, number], far: boolean } => {\n    const {location} = state.warehouse.boxes[productCode];\n    //const far = !!rackFarLocations.find((l) => (l[0] === location[0] && l[1] === location[1]));\n    const far = false;\n    // Some products are considered 'far', it takes longer to pick those\n    return {\n      location,\n      far\n    };\n  };\n  \n  // Converts pixel coordinate to scene location\n  const pointToSceneLocation = useCallback((point: PIXI.Point): [number, number] => {\n    if (!mapData?.tilewidth || !mapData.tileheight) {\n      return [0, 0];\n    }\n    return [Math.floor(point.x / mapData?.tilewidth), Math.floor(point.y / mapData?.tileheight)];\n  }, [mapData]);\n  \n  const getBoxNameAtLocation = (location: [number, number]) => {\n    const entry = Object.entries(warehouse.boxes)\n      .find(([name, box]) => box.location[0] === location[0] && box.location[1] === location[1]);\n    if (entry) return entry[0];\n  }\n\n  const handleClick = (productCode: string, event: PIXI.interaction.InteractionEvent) => {\n    props.onProductClick(productCode);\n\n    const wmsData = state.wms.find(d => d.productCode === productCode)!;\n\n    dispatch({ \n      type: 'setStatusText',\n      text: `Selected: ${wmsData.description} (${productCode})`\n    });\n\n    setSelectedBox(productCode);\n  }\n\n\n  const handleDragged = (productCode: string, event: PIXI.interaction.InteractionEvent) => {\n    const position = event.data.global;\n    const location = pointToSceneLocation(position); // tile location\n\n    const object = getObject(location);\n    const isRack = object?.type === \"rack\";\n    let tint = 0xFFFFFF;\n    if (isRack) {\n      const otherBoxName = getBoxNameAtLocation(location);\n      if (!otherBoxName || otherBoxName === productCode) {\n        tint = 0x00FF30; // Can drop here\n      } else {\n        tint = 0xFF3300; // Can't drop on another box\n      }\n    }\n    setTint(event.currentTarget, tint);\n  }\n\n  const handleBoxDragEnd = (productCode: string, event: PIXI.interaction.InteractionEvent) => {\n    const position = event.data.global;\n    const location = pointToSceneLocation(position); // tile location\n\n    setTint(event.currentTarget, 0xFFFFFF);\n\n    const object = getObject(location);\n\n    if (object) {\n      const otherBoxName = getBoxNameAtLocation(location);\n      if (!otherBoxName || otherBoxName === productCode) {\n\n        if (otherBoxName !== productCode && !state.muted) sound.play(\"snap\");\n        const zone = object?.properties?.find(p => p.name === \"zone\")?.value;\n        dispatch({ type: 'placeBox', productCode, location, zone });\n        return;\n      }\n    }\n\n    // Couldn't place, fly back to origin\n    const box = warehouse.boxes[productCode];\n    const originX = box.location[0] * mapData!.tilewidth;\n    const originY = box.location[1] * mapData!.tileheight;\n\n    if (!state.muted) sound.play('whoosh'); \n    gsap.to(event.currentTarget, { \n      duration: .5,\n      ease: \"bounce.out\",\n      pixi: {\n        x: originX,\n        y: originY\n      }\n    });\n  }\n\n  const renderFloorStuff = () => {\n    return (\n      <>\n        <Sprite x={127} y={383} image={`${process.env.PUBLIC_URL}/images/sprites/floor/inbound.png`} />\n        <Sprite x={544} y={383} image={`${process.env.PUBLIC_URL}/images/sprites/floor/outbound.png`} />\n      </>\n    );\n  }\n\n  const renderBoxes = () => {\n    if (!mapData || !wallLocations.length) return null;\n\n    return Object.entries(warehouse.boxes).map(([productCode, box]) => {\n      const wmsData = state.wms.find(d => d.productCode === productCode)!;\n      return (\n        <Box \n          location={box.location}\n          product={wmsData}\n          tileWidth={mapData.tilewidth} \n          tileHeight={mapData.tileheight}\n          selected={productCode === selectedBox}\n          onClick={(event) => handleClick(productCode, event)}\n          onDragged={(event) => handleDragged(productCode, event)}\n          onReleased={(event) => handleBoxDragEnd(productCode, event)}\n          key={productCode}\n          behindWall={isNorthOfWall(box.location, wallLocations)}\n          interactive={state.gameState === GameState.placingBoxes}\n        />\n      );\n    });\n  };\n\n  /** Returns true if the tile is blocked */\n  const locationIsBlocked = useCallback((location: [number, number]) => {\n    return wallLocations.some((l) => l[0] === location[0] && l[1] === location[1]);\n  }, [wallLocations]);\n\n  const aStar = useMemo(() => {\n    if (!mapData || !wallLocations.length) {\n        return null;\n    }\n    const matrix: number[][] = [];\n    for (let y = 0; y < mapData.height; y++) {\n        const row: number[] = [];\n        for (let x = 0; x < mapData.width; x++) {\n            const location: [number, number] = [x, y];\n            const blocked = locationIsBlocked(location);\n            row.push(blocked ? 1 : 0);\n        }\n        matrix.push(row);\n    }\n    return new AStarFinder({\n      grid: {\n          matrix\n      },\n      diagonalAllowed: false,\n      includeStartNode: false,\n      heuristic: \"Manhatten\",\n      weight: 0,\n    });\n  }, [mapData, locationIsBlocked, wallLocations]);\n\n  const [pickingList1, setPickingList1] = useState<PickingList>();\n  const [pickingList2, setPickingList2] = useState<PickingList>();\n  const [pickingList3, setPickingList3] = useState<PickingList>();\n\n  useEffect(() => {\n    if (state.gameState === GameState.pickingBoxes) {\n      setSelectedBox(undefined);\n\n      const nextPickingList1 = state.pickingLists.find((pL, i) => !pL.complete && i % 3 === 0);\n      setPickingList1(nextPickingList1);\n      const nextPickingList2 = state.pickingLists.find((pL, i) => !pL.complete && i % 3 === 1);\n      setPickingList2(nextPickingList2);\n      const nextPickingList3 = state.pickingLists.find((pL, i) => !pL.complete && i % 3 === 2);\n      setPickingList3(nextPickingList3);\n      \n      if (!nextPickingList1 && !nextPickingList2 && !nextPickingList3) {\n        dispatch({ type: 'completeGame' });\n      }\n    }\n  }, [dispatch, state.gameState, state.pickingLists]);\n  \n\n  const renderGuys = () => {\n    if (!aStar) return null;\n\n    return (\n      <>\n        <WarehouseGuy\n          name={'guy1'}\n          pickingList={pickingList1}  \n          homeLocation={[17, 12]}\n          tileSize={mapData!.tilewidth}\n          getProductLocation={getProductLocation}\n          dispatch={dispatch}\n          aStar={aStar}\n          visible={state.gameState === GameState.pickingBoxes}\n        />\n        <WarehouseGuy\n          name={'guy2'}\n          pickingList={pickingList2}  \n          homeLocation={[18, 12]}\n          tileSize={mapData!.tilewidth}\n          getProductLocation={getProductLocation}\n          dispatch={dispatch}\n          aStar={aStar}\n          visible={state.gameState === GameState.pickingBoxes}\n        />\n        <WarehouseGuy\n          name={'guy3'}\n          pickingList={pickingList3}  \n          homeLocation={[19, 12]}\n          tileSize={mapData!.tilewidth}\n          getProductLocation={getProductLocation}\n          dispatch={dispatch}\n          aStar={aStar}\n          visible={state.gameState === GameState.pickingBoxes}\n        />\n      </> \n    )\n  }\n\n  return (\n    <Stage width={width} height={height}>\n      <Container \n        ref={ref}\n        interactive={true}\n        hitArea={new PIXI.RoundedRectangle(0, 0, width, height, 0)}\n        sortableChildren\n        {...restProps}\n      >\n        { mapData && (\n          <>\n            <Tilemap \n              basePath={basePath} \n              data={mapData} \n              setObjects={setObjects}\n              setWallLocations={setWallLocations}\n            />\n            {renderFloorStuff()}\n            {renderBoxes()}\n            {renderGuys()}\n          </>\n        )}\n      </Container>\n    </Stage>\n  );\n}\n\nexport default Scene;\n\n// Sets tint on box\nconst setTint = (obj: PIXI.DisplayObject, tint: number) => {\n  const ghost = (obj as PIXI.Container).children.find(c => c.name === 'ghost');\n  if (ghost) {\n    (ghost as PIXI.Sprite).tint = tint; \n  }\n}\n\n// Returns true if the tile south of this one is a wall\nconst isNorthOfWall = (location: [number, number], wallLocations: [number, number][]) => {\n  return wallLocations.some(wL => wL[0] === location[0] && wL[1] === location[1] + 1);\n}\n","import React, { useEffect, useRef, useContext, Fragment } from \"react\";\nimport { AppContext } from \"components/context/AppProvider\";\nimport { Categories, WMSData } from \"reducers/wmsReducer\";\n\n\ninterface Props {\n  selectedProduct?: string;\n}\n\nconst SKUProfile = (props: Props) => {\n  const tableRef = useRef<HTMLTableElement>(null);\n  const { state } = useContext(AppContext);\n  const data = state.wms;\n\n  useEffect(() => {\n    if (!tableRef.current) return;\n    const table = tableRef.current;\n    \n    // add highlight class \n    table.querySelectorAll(`tr[data-code=\"${props.selectedProduct}\"]`).forEach(row => {\n      row.classList.add(\"highlight\");\n      row.scrollIntoView({ block: 'end'});\n    });\n    return () => {\n    // Remove highlight class from prevously highlighted row\n      table.querySelectorAll('.highlight').forEach(row => {\n        row.classList.remove(\"highlight\");\n      });  \n    }\n  }, [props.selectedProduct]);\n\n  const renderContent = () => {\n    return (\n      <table ref={tableRef}>\n        <tbody>\n        <tr><th colSpan={2} className=\"category-header-a\">A. Fast-moving</th></tr>\n        {data.filter(row => row.category === Categories.A).map(row => renderRow(row))}\n        <tr><th colSpan={2} className=\"category-header-b\">B. Medium-moving</th></tr>\n        {data.filter(row => row.category === Categories.B).map(row => renderRow(row))}\n        <tr><th colSpan={2} className=\"category-header-c\">C. Slow-moving</th></tr>\n        {data.filter(row => row.category === Categories.C).map(row => renderRow(row))}\n        <tr><th colSpan={2} className=\"category-header-d\">D. Not-moving</th></tr>\n        {data.filter(row => row.category === Categories.D).map(row => renderRow(row))}\n        </tbody>\n      </table>\n    )\n  }\n\n  const renderRow = (row: WMSData) => {\n    const categoryClasses = { \n      [Categories.A]: \"cat-a\",\n      [Categories.B]: \"cat-b\",\n      [Categories.C]: \"cat-c\",\n      [Categories.D]: \"cat-d\",\n    }\n    return (\n      <Fragment key={row.productCode}>\n        <tr key={row.productCode} data-code={row.productCode} className={categoryClasses[row.category]}>\n          <td>{row.productCode}</td>\n          <td>{row.description}</td>\n        </tr>\n        {row.pair && (\n          <tr key={`${row.productCode}-pair`} data-code={row.productCode} className={categoryClasses[row.category]}>\n            <td colSpan={2} className=\"pair\">\n              {` Frequently sold with ${row.pair}`}\n            </td>\n          </tr>\n        )}\n      </Fragment>\n    )\n  }\n  return (\n    <>\n      <h2>SKU velocity profile</h2>\n      {renderContent()}\n    </>\n  )\n}\n\nexport default SKUProfile;","import React, { useContext } from \"react\";\nimport { AppContext } from \"components/context/AppProvider\";\nimport { PickingList } from \"reducers/pickingListsReducer\";\n\nconst PickingLists = () => {\n  const { state } = useContext(AppContext);\n  const data = state.pickingLists;\n  const productNameMap = state.wms.reduce((acc: {[key: string]: string}, value) => {\n    if (!acc[value.productCode]) {\n      acc[value.productCode] = value.description;\n    };\n    return acc;\n  }, {});\n  // useEffect(() => {\n  //   if (!tableRef.current) return;\n  //   const table = tableRef.current;\n    \n  //   // add highlight class \n  //   const row = table.querySelector(`tr[data-code=\"${props.selectedProduct}\"]`)\n  //   row?.classList.add(\"highlight\");\n  //   row?.scrollIntoView({ block: 'end'});\n  //   return () => {\n  //   // Remove highlight class from prevously highlighted row\n  //     table.querySelector(\".highlight\")?.classList.remove(\"highlight\");\n  //   }\n  // }, [props.selectedProduct]);\n\n  const renderContent = () => {\n    return (\n      data.map(pickingList => (\n        <div key={pickingList.orderNo}>\n          {renderPickingList(pickingList)}\n        </div>\n      ))\n    )\n  }\n\n  const renderPickingList = (pList: PickingList) => {\n    return (\n      <table>\n        <tbody>\n          <tr>\n            <td colSpan={3}>Order no: {pList.orderNo}</td>\n          </tr>\n          { pList.products.map(p => renderProduct(pList, p)) }\n        </tbody>\n      </table>\n    )\n  }\n\n  const renderProduct = (pList: PickingList, productCode: string) => {\n    const completed = pList.pickedProducts?.some(p => p === productCode);\n\n    return (\n      <tr key={productCode} className={completed ? \"completed\" : \"\"}>\n        <td></td>\n        <td>{productCode}</td>\n        <td>{productNameMap[productCode]}</td>\n      </tr>\n    )\n  }\n\n  return (\n    <>\n      <h2>Picking lists</h2>\n      {renderContent()}\n    </>\n  )\n}\n\nexport default PickingLists;","import React, { useContext } from 'react';\nimport { AppContext } from 'components/context/AppProvider';\nimport './ipad.css';\nimport SKUProfile from './content/SKUProfile';\nimport PickingLists from './content/PickingLists';\nimport { GameState } from 'reducers/gameStateReducer';\n\ninterface Props {\n  selectedProduct?: string;\n}\n\nconst IPad = (props: Props) => {\n  const { state } = useContext(AppContext);\n  const { gameState } = state;\n\n\n  const renderContent = () => {\n    switch (gameState) {\n      case GameState.placingBoxes:\n        return <SKUProfile selectedProduct={props.selectedProduct} />;\n      case GameState.pickingBoxes:\n      case GameState.complete:\n        return <PickingLists />;\n    }\n  }\n\n  return (\n    <div \n      className=\"ipad\"\n      style={{backgroundImage: `url(${process.env.PUBLIC_URL}/images/ui/ipad.png)`}}\n    >\n      <div className=\"content\">\n        {renderContent()}\n      </div>\n    </div>      \n  )\n}\n\nexport default IPad;","import React, { useContext } from \"react\";\nimport { AppContext } from \"components/context/AppProvider\";\nimport './startButton.css';\nimport { GameState } from \"reducers/gameStateReducer\";\n\nconst StartButton = () => {\n  const { state, dispatch } = useContext(AppContext);\n\n  const handleClick = () => {\n    switch (state.gameState) {\n      case GameState.placingBoxes:\n        const allBoxedPlaced = !Object.values(state.warehouse.boxes).some(b => !(b.zone));\n        if(!allBoxedPlaced) {\n          dispatch({ type: 'setStatusText', text: \"First place all goods in the warehouse!\"});\n          return;\n        }\n        dispatch({ type: 'startPicking'});\n    \n        break;\n      case GameState.complete:\n        // eslint-disable-next-line no-restricted-globals\n        location.reload();\n        break;\n    }\n  };\n\n  switch (state.gameState) {\n    case GameState.placingBoxes:\n      return <button onClick={handleClick} className=\"start-button\"><h1>Complete</h1></button>;\n    default:\n      return null;\n  }\n}\n\nexport default StartButton;","import React, { useContext, useRef, useEffect, useState } from \"react\";\nimport { AppContext } from \"components/context/AppProvider\";\nimport './statusText.css';\nimport { GameState } from \"reducers/gameStateReducer\";\nimport { SPEED_MULTIPLIER } from \"constants/gameSettings\";\n\nconst StatusText = () => {\n  const { state, dispatch } = useContext(AppContext);\n  const text = state.statusText;\n  const time = state.time;\n\n  useEffect(() => {\n    let timeout: NodeJS.Timeout;\n    const start = performance.now();\n    if (state.gameState === GameState.pickingBoxes) {\n      const update = () => {\n        dispatch({type: 'tick', start})\n      };\n      timeout = setInterval(update, 100);\n    }\n    return () => {\n      clearTimeout(timeout);\n    }\n  }, [dispatch, state.gameState]);\n\n  if (state.gameState === GameState.pickingBoxes) {\n    const maxTime = 45000; // maximum amount of time\n    const progressBarWidth = Math.min(time / maxTime, 1);\n    const progressColor = time > 30000 ? \"#f63a0f\" : \"#86e01e\";\n\n    return (\n      <div className=\"status\">\n        <div className=\"progress\">\n          <div \n            className=\"progress-bar\"\n            style={{\n              width: `${progressBarWidth*100}%`,\n              backgroundColor: progressColor\n            }}\n          ></div>\n          <div className=\"text\">\n            {formatTime(time)}\n          </div>\n        </div>\n      </div>\n    );\n  }\n  return (\n    <div className=\"status\">{text}</div>\n  );\n}\n\nexport default StatusText;\n\nexport const formatTime = (ms: number ) => {\n  let seconds = (ms / 1000);\n  var hours = Math.floor( seconds / 3600 ); // 3,600 seconds in 1 hour\n  seconds = seconds % 3600;\n  var minutes = Math.floor( seconds / 60 );\n  seconds = seconds % 60;\n  if (hours > 0) {\n    return `${padLeft(hours)}:${padLeft(minutes)}:${seconds.toFixed(1).padStart(4, '0')}`;\n  } \n  return `${padLeft(minutes)}:${seconds.toFixed(1).padStart(4, '0')}`;\n}\n\nconst padLeft = (input: number) => {\n  return `${input}`.padStart(2, '0');\n}\n\n","import React, { useContext } from \"react\";\nimport './settings.css';\nimport { AppContext } from \"components/context/AppProvider\";\n\nconst Settings = () => {\n  const { state, dispatch } = useContext(AppContext);\n\n  const handleMutedChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    dispatch({ type: 'setMuted', value: !e.target.checked})  \n  }\n\n  // @ts-ignore \n  window.cheat = () => {\n    dispatch({ type: 'cheat' })  \n  }\n  return (\n    <div className=\"settings\">\n      <input type=\"checkbox\" onChange={handleMutedChange} checked={state.muted === false} />\n      <label>Sound on</label>\n    </div>\n  )\n}\n\nexport default Settings;","import { useContext, useState, useEffect, useMemo, memo, Fragment } from \"react\";\nimport React from \"react\";\nimport { GameState } from \"reducers/gameStateReducer\";\nimport { AppContext } from \"components/context/AppProvider\";\nimport \"./gameOverScreen.css\"\nimport { formatTime } from \"../StatusText\";\nimport { Categories, WMSData } from \"reducers/wmsReducer\";\n\nconst GameOverScreen = () => {\n  const { state, dispatch } = useContext(AppContext);\n  const [show, setShow] = useState(false); \n\n  const handleReset = () => {\n    setShow(false);\n    dispatch({ type: \"restart\" });\n  }\n  \n  useEffect(() => {\n    if (state.gameState === GameState.pickingBoxes) {\n      setTimeout(setShow, 10000, true);\n    }\n  }, [state.gameState]);\n\n  let totalScore = 0;\n  const maxScore = 16;\n\n  // Create array of pairs (arrays)\n  const pairs = useMemo(() => {\n    return state.wms.filter(p => p.pair).reduce<[string, string][]>((acc, value) => {\n      const pair = acc.find(p => p.indexOf(value.pair!) > -1);\n      if (pair) {\n        pair[1] = value.productCode;\n      } else {\n        acc.push([value.productCode, \"\"])\n      }\n      return acc;\n    }, []);\n  }, [state.wms]);\n  \n  if (!show) {\n    return null;\n  }\n\n  const getProductRow = (display: string, category: Categories) => {\n    let correct = 0;\n    let total = 0;\n\n    state.wms.forEach((value: WMSData) => {\n      if (value.category === category) {\n        total++;\n        const {zone} = state.warehouse.boxes[value.productCode];\n        if (zone === category.toString()){\n          correct++;\n        }\n      }\n    })\n    const points = correct;\n    totalScore += points;\n    return (\n      <>\n        <div>{`${display} `}</div>\n        <div>{`${points} placed correct`}</div>\n        <div>{`${points}/${total}`}</div>\n      </>\n    )\n  }\n  \n  const getPairRow = (pair: [string, string]) => {\n    const location1 = state.warehouse.boxes[pair[0]].location;\n    const location2 = state.warehouse.boxes[pair[1]].location;\n\n    const placedNext = (Math.abs(location1[0] - location2[0]) === 1) && location1[1] === location2[1];\n    let points = 0;\n    if (placedNext) {\n      points = 3;\n      totalScore += points;\n      return (\n        <Fragment key={pair.toString()}>\n          <div>Pair: {`${pair}`}</div>\n          <div>Placed next to each other</div>\n          <div>{`${points}/3`}</div>\n        </Fragment>\n      )\n    }\n    return (\n      <Fragment key={pair.toString()}>\n        <div>Pair: {`${pair}`}</div>\n        <div>Not placed next to each other</div>\n        <div>{`${points}/3`}</div>\n      </Fragment>\n    )\n  }\n\n  const getBinRow = () => {\n    const pointPenalty = 5;\n    let mistakes = 0;\n    const nonMovers = state.wms.filter(p => p.category === Categories.D);\n    // All non movers should be in the bin zone\n    nonMovers.forEach(value => {\n      const {zone} = state.warehouse.boxes[value.productCode];\n      if (zone !== Categories.D.toString()){\n        mistakes++;\n      }\n    });\n    const movers = state.wms.filter(p => p.category !== Categories.D);\n    // All regular products should not be in the bin!\n    movers.forEach(value => {\n      const {zone} = state.warehouse.boxes[value.productCode];\n      if (zone === Categories.D.toString()){\n        mistakes++;\n      }\n    });\n    const points = -pointPenalty * mistakes;\n    totalScore += points;\n    return (\n      <>\n        <div>Non moving products</div>\n        <div>{`${mistakes} mistakes made`}</div>\n        <div>{`${points}`}</div>\n      </>\n    )\n  }\n\n  const renderSummary = () => {\n    if (totalScore === maxScore) {\n      return (\n        <span className=\"success\">\n          Good job! You reduced the travel time in the warehouse by choosing the most optimum storage locations for the goods.\n        </span>\n      )\n    }\n    return (\n      <span className=\"fail\">\n        Oh no! The storage locations you chose for the goods are not optimum and increased the travel time in the warehouse.\n      </span>\n    )\n  }\n\n  return (\n    <div className=\"gameover-screen\">\n        <h1>Scoreboard</h1>\n      <div className=\"modal\">\n        <div className=\"table\">\n          <div className=\"table-header\">Products</div>\n          <div className=\"table-header\">Result</div>\n          <div className=\"table-header\">Score</div>\n          {getProductRow(\"Fast moving products\", Categories.A)}\n          {getProductRow(\"Medium moving products\", Categories.B)}\n          {getProductRow(\"Slow moving products\", Categories.C)}\n          {pairs.map(p => getPairRow(p))}\n          {getBinRow()}\n\n          <div className=\"table-footer summary\">\n            {renderSummary()}\n          </div>\n          {/* <div className=\"table-footer\">\n            Your time: {formatTime(state.time)}\n          </div> */}\n          <div className=\"table-footer\">\n            Total: \n            <b>{totalScore}</b>\n          </div>\n        </div>\n      </div>\n        <button onClick={handleReset} className=\"button\">\n          Try again?\n        </button>\n    </div>\n  )\n}\n\nexport default memo(GameOverScreen);\n","import { memo, useContext } from \"react\";\nimport React from \"react\";\nimport \"./introScreen.css\"\nimport { AppContext } from \"components/context/AppProvider\";\nimport { GameState } from \"reducers/gameStateReducer\";\n\n\nconst IntroScreen = () => {\n  const {state, dispatch} = useContext(AppContext);\n\n  const onClick = () => {\n    dispatch({ type: \"startGame\" });\n  }\n\n  if (state.gameState !== GameState.intro) {\n    return null;\n  }\n  return (\n    <div className=\"intro-screen\">\n        <h1>SKU is the word!</h1>\n      <div className=\"modal\">\n        <div className=\"text\">\n          The warehouse needs to be filled! Consult the WMS to know what goes where. \n        </div>\n        <div className=\"trilogy\">\n          <div>\n            <img src={`${process.env.PUBLIC_URL}/images/intro/intro-1.png`} alt=\"docking area\"></img>\n            <p>Take the boxes from the outside area. Check the contents on the WMS.</p>\n          </div>\n          <div>\n            <img src={`${process.env.PUBLIC_URL}/images/intro/intro-2.png`} alt=\"docking area\"></img>\n            <p>Place the boxes in the racks in the warehouse. Note the distance of the racks to the outbound area.</p>\n          </div>\n          <div>\n            <img src={`${process.env.PUBLIC_URL}/images/intro/intro-3.png`} alt=\"docking area\"></img>\n            <p>Some products will not be sold. Place them outside in the discard area.</p>\n          </div>\n        </div>\n      </div>\n        <button onClick={onClick} className=\"button\">\n          Start\n        </button>\n    </div>\n  )\n}\n\nexport default memo(IntroScreen);\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"style\", null, \".a{fill:#fff;}.a,.b{stroke:#283583;stroke-linecap:round;stroke-linejoin:round;stroke-width:0.75px;}.b{fill:none;}\"));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"title\", null, \"Back\");\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"circle\", {\n  className: \"a\",\n  cx: 15.02,\n  cy: 15.02,\n  r: 14.65\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"b\",\n  d: \"M11.64,16\",\n  transform: \"translate(-0.97 -0.93)\"\n});\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"b\",\n  d: \"M11.63,16\",\n  transform: \"translate(-0.97 -0.93)\"\n});\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"b\",\n  d: \"M20.38,22.88\",\n  transform: \"translate(-0.97 -0.93)\"\n});\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"line\", {\n  className: \"b\",\n  x1: 19.39,\n  y1: 8.16,\n  x2: 10.65,\n  y2: 15.02\n});\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"line\", {\n  className: \"b\",\n  x1: 19.39,\n  y1: 21.98,\n  x2: 10.65,\n  y2: 15.11\n});\n\nvar SvgClose = function SvgClose(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 30.04,\n    height: 30.04,\n    viewBox: \"0 0 30.04 30.04\",\n    ref: svgRef\n  }, props), _ref2, title === undefined ? _ref3 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgClose, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/close.7ec0d58f.svg\";\nexport { ForwardRef as ReactComponent };","// {process.env.REACT_APP_PLAYER_MODE  && (\n//     <div id=\"close\">\n//       X\n//     </div>\n//   )}\nimport React, {  useEffect } from 'react';\nimport './style/styles.css';\nimport { ReactComponent as CloseIcon } from './style/close.svg';\n\ninterface Props {\n    gameDataReceived: (gameData: any) => void;\n}\n\nconst PlayerBridge = (props: Props) => {   \n    const {gameDataReceived} = props;\n\n    const send = (payload: any) => {\n        // @ts-ignore\n        if (window.hasOwnProperty(\"webkit\") && window.webkit.hasOwnProperty(\"messageHandlers\")){\n            var stringifiedMessageObj = JSON.stringify(payload);\n            // Send to In App Browser context\n            // @ts-ignore\n            webkit.messageHandlers.cordova_iab.postMessage(stringifiedMessageObj);\n        }\n        else {\n            // @ts-ignore\n            window.parent.postMessage(payload, '*');\n        }\n    }\n\n    const exit = () => {       \n        send({\n            type: 'exit'\n        });\n    }\n\n    \n    useEffect(() => {\n        if (!process.env.REACT_APP_PLAYER_MODE) {\n            return;\n        }\n        \n        const receiveMessage = (msg: any) => {\n            if (!msg.data || !msg.data.hasOwnProperty('userId')){\n                return;\n            }\n            // @ts-ignore\n            window.GAMEDATA = msg.data;\n            gameDataReceived(msg.data);\n        }\n\n        // @ts-ignore\n        window.setGameData = (gameData) => {\n            send({\n                type: 'setGameData',\n                data: gameData\n            });\n        }\n       \n        // @ts-ignore\n        window.GAMEDATA = null; \n        \n        // @ts-ignore\n        window.getGameData = () => {\n            // @ts-ignore\n            return window.GAMEDATA;\n        }   \n        window.addEventListener(\"message\", receiveMessage, false);\n    }, [gameDataReceived]);\n\n    if (!process.env.REACT_APP_PLAYER_MODE) {\n        return null;\n    }\n\n\n    return (\n        <div className=\"close\">\n            <CloseIcon onClick={exit} />\n        </div>\n    )\n}\n\nexport default PlayerBridge;","import React, { useState, useContext, useEffect, useRef } from 'react';\nimport './App.css';\nimport Scene from 'components/Scene';\nimport * as PIXI  from 'pixi.js';\nimport IPad from 'components/ui/IPad';\nimport StartButton from 'components/ui/StartButton';\nimport { AppProvider, AppContext } from 'components/context/AppProvider';\nimport StatusText from 'components/ui/StatusText';\nimport Settings from 'components/ui/Settings';\nimport GameOverScreen from 'components/ui/GameOverScreen';\nimport IntroScreen from 'components/ui/IntroScreen';\nimport PlayerBridge from 'components/playerBridge';\nimport { GameData } from 'components/playerBridge/GameData';\nwindow.PIXI = PIXI;\n\nconst INITIAL_WIDTH = 960;\nconst INITIAL_HEIGHT = 480;\n\nfunction App() {\n  \n  const width = 21 * 32;\n  const height = 32 * 13;\n\n  const [selectedProduct, setSelectedProduct] = useState<string>();\n  const ref = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    // when width or height of window is smaller than INITIAL_WIDTH or INITIAL_HEIGHT, scale down\n    const resize = () => {\n      if(window.innerWidth - INITIAL_WIDTH < 0 || window.innerHeight - INITIAL_HEIGHT < 0){\n        const diffW = window.innerWidth - INITIAL_WIDTH;\n        const diffH =  window.innerHeight - INITIAL_HEIGHT;\n        \n        let scale = 1;\n        if (diffW < diffH) {\n          scale = window.innerWidth / INITIAL_WIDTH;\n        } else {\n          scale =  window.innerHeight / INITIAL_HEIGHT;\n        }\n        ref.current!.style.transform = `scale(${scale}) translate(-50%, -50%)`;\n      } else {\n        ref.current!.style.transform = 'translate(-50%, -50%)';\n      }\n    }\n    resize();\n    window.addEventListener('resize', resize);\n    return () => {\n      window.removeEventListener('resize', resize);\n    }\n  }, []);\n\n  return (\n    <>\n      <AppProvider>\n        <AppAwareBridge />\n        <div className=\"App\" ref={ref}>\n          <Settings />\n          <Scene \n            tilemap=\"scenes/level2.json\" \n            width={width} \n            height={height}\n            onProductClick={setSelectedProduct}\n          />\n          <IPad selectedProduct={selectedProduct}/>\n          <StartButton />\n          <StatusText />\n          <IntroScreen />\n          <GameOverScreen />\n        </div>\n      </AppProvider>\n    </>\n  );\n}\n\nexport default App;\n\nconst AppAwareBridge = () => {\n  const {dispatch} = useContext(AppContext);\n\n  const handleGameDataReceived = (data: GameData) => {\n    if (data.content.wms) {\n      dispatch({ type: 'setWMS', wms: data.content.wms });\n    }\n    if (data.content.pickingLists) {\n      dispatch({ type: 'setPickingLists', pickingLists: data.content.pickingLists });\n    }\n    dispatch({ type: 'restart'}); // ensure the warehouse state gets reinitialized based on the current WMS\n    dispatch({ type: 'intro'});\n  }\n\n  return (\n    <PlayerBridge gameDataReceived={handleGameDataReceived}/>\n  )\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}