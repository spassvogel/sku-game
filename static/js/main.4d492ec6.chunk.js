(this["webpackJsonpsku-game"]=this["webpackJsonpsku-game"]||[]).push([[0],{38:function(e,t,n){e.exports=n(65)},43:function(e,t,n){},44:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(34),c=n.n(o),i=(n(43),n(10)),u=(n(44),n(19)),l=n(12),s=n(36),d=n(7);window.PIXI=d;var m,f=Object(l.PixiComponent)("RectTileLayer",{create:function(e){return n(33),new window.PIXI.tilemap.CompositeRectTileLayer(0,[e.texture])},applyProps:function(e,t,n){var a=n.layer,r=n.tileset,o=n.horizontalTiles,c=n.spritesheet;if(a.data)for(var i=0;i<a.data.length;i++){var u=r.tilewidth,l=r.tileheight,s=i%o*u,d=Math.floor(i/o)*l;if(a.data[i]>0){var m="".concat(r.name,"-").concat(a.data[i]);e.addFrame(c.textures[m],s,d)}}}}),p=function(e){var t=e.basePath,n=e.data,o=e.setRackLocations,c=e.setRackFarLocations,u=e.setDockLocations,s=e.setWallLocations,m=Object(a.useState)(),f=Object(i.a)(m,2),p=f[0],y=f[1],O=Object(a.useState)(),j=Object(i.a)(O,2),S=j[0];j[1];return Object(a.useEffect)((function(){var e=v(n),a=g(n),r=d.Texture.from("".concat(t,"/").concat(a.image)),i=d.BaseTexture.from("".concat(t,"/").concat(a.image)),l=new d.Spritesheet(i,e),m=[];l.parse((function(){var e,t,i,d=null===(e=a.tiles)||void 0===e?void 0:e.filter((function(e){var t;return null===(t=e.properties)||void 0===t?void 0:t.some((function(e){return"rack"===e.name&&e.value}))})).map((function(e){return e.id})),f=null===(t=a.tiles)||void 0===t?void 0:t.filter((function(e){var t;return null===(t=e.properties)||void 0===t?void 0:t.some((function(e){return"far"===e.name&&e.value}))})).map((function(e){return e.id})),p=null===(i=a.tiles)||void 0===i?void 0:i.filter((function(e){var t;return null===(t=e.properties)||void 0===t?void 0:t.some((function(e){return"dock"===e.name&&e.value}))})).map((function(e){return e.id})),g=n.layers.filter((function(e){return e.visible})).map((function(e){return e.properties&&e.properties.some((function(e){return"wall"===e.name&&!0===e.value}))&&b(m,e,e.width),h(e,r,n.width,a,l)})),v=n.layers.find((function(e){var t;return null===(t=e.properties)||void 0===t?void 0:t.some((function(e){return"placeholders"===e.name&&e.value}))}));if(v){var O=[],j=[],S=[];v.data.forEach((function(e,t){if(d&&d.some((function(t){return t===e-a.firstgid}))){var n=t%v.width,r=Math.floor(t/v.width);O.push([n,r])}if(f&&f.some((function(t){return t===e-a.firstgid}))){var i=t%v.width,l=Math.floor(t/v.width);j.push([i,l])}if(p&&p.some((function(t){return t===e-a.firstgid}))){var s=t%v.width,m=Math.floor(t/v.width);S.push([s,m])}o(O),c(j),u(S)}))}s(m),y(g)}))}),[t,n,o,u,s]),r.a.createElement(l.Container,null,p,S)},g=function(e){if(!e.tilesets.length)throw new Error("No tilesets found! Can't continue");if(e.tilesets.length>1&&console.warn("Found more than one tileset. But we currently only support one."),e.tilesets[0].source)throw new Error("Please embed tilemaps in Tiled! Can't continue");return e.tilesets[0]},h=function(e,t,n,a,o){return r.a.createElement(f,{key:e.name,texture:t,layer:e,horizontalTiles:n,tileset:a,spritesheet:o})},v=function(e){for(var t=g(e),n=t.columns,a={},r=0;r<t.tilecount;r++){var o=t.tilewidth,c=t.tileheight,i=r%n*o,u=Math.floor(r/n)*c;a["".concat(t.name,"-").concat(r+1)]={frame:{x:i,y:u,w:o,h:c},spriteSourceSize:{x:i,y:u,w:o,h:c},rotated:!1,trimmed:!1,sourceSize:{w:o,h:c}}}return{frames:a,meta:{image:t.image,size:{w:t.imagewidth,h:t.imageheight},scale:1}}},b=function(e,t,n){t.data.reduce((function(e,t,a){if(t>0){var r=a%n,o=Math.floor(a/n);e.push([r,o])}return e}),e)};!function(e){e[e.A=0]="A",e[e.B=1]="B",e[e.C=2]="C",e[e.D=3]="D"}(m||(m={}));var y,O=[{category:m.A,productCode:"IRN 590",description:"Clothes Iron"},{category:m.A,productCode:"CAM 679",description:"Digital Camera"},{category:m.A,productCode:"BAM 223",description:"Baby monitor"},{category:m.A,productCode:"SMK 019",description:"Smoke detector",slotting:"Usually sold with BAT 917"},{category:m.A,productCode:"DLA 413",description:"Desk lamp"},{category:m.A,productCode:"VAC 082",description:"Vacuum cleaner"},{category:m.A,productCode:"BAT 917",description:"Battery charger",slotting:"Usually sold with SMK 019"},{category:m.B,productCode:"VIR 555",description:"Virtual Reality headset"},{category:m.B,productCode:"PTV 555",description:"Plasma TV Set",slotting:"Usually sold with SPK 876"},{category:m.B,productCode:"SPK 876",description:"Home Theatre System/Speaker System",slotting:"Usually sold with PTV 555"},{category:m.B,productCode:"MWO 901",description:"Microwave Oven"},{category:m.B,productCode:"OTV 482",description:"OLED TV Set"},{category:m.C,productCode:"MIC 099",description:"Microphone",slotting:"Usually sold with DSC 743 as a karaoke set"},{category:m.C,productCode:"WSH 322",description:"Washing Machine"},{category:m.C,productCode:"RFG 411",description:"Refrigerator"},{category:m.C,productCode:"SMX 041",description:"Stand Mixer"},{category:m.C,productCode:"DSC 743",description:"Disco Ball",slotting:"Usually sold with MIC 099 as a karaoke set"},{category:m.D,productCode:"TPH 255",description:"Telephone"},{category:m.D,productCode:"CST 964",description:"Cassette Player"}],j=n(37),S=n(14),w=function(e,t){switch(t.type){case"startPicking":return e.map((function(e){return e.orderNo===t.orderNo?Object(S.a)(Object(S.a)({},e),{},{guy:t.guy}):e}));case"completeProductPick":return e.map((function(e){return e.orderNo===t.orderNo?Object(S.a)(Object(S.a)({},e),{},{pickedProducts:[].concat(Object(j.a)(e.pickedProducts||[]),[t.productCode])}):e}));case"completeOrder":return e.map((function(e){return e.orderNo===t.orderNo?Object(S.a)(Object(S.a)({},e),{},{complete:!0}):e}));case"restart":return e.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{guy:void 0,complete:!1,pickedProducts:[]})}));default:return e}},k=n(24),x={boxes:function(){var e=O.map((function(e){return e.productCode}));return e.sort((function(){return.5-Math.random()})),e.reduce((function(e,t,n){return e[t]={location:[1+n,1]},e}),{})}()},C=function(e,t){switch(t.type){case"placeBox":var n=t.location,a=t.inRack,r=Object(S.a)(Object(S.a)({},e.boxes),{},Object(k.a)({},t.productCode,Object(S.a)(Object(S.a)({},e.boxes[t.productCode]),{},{location:n,inRack:a})));return Object(S.a)(Object(S.a)({},e),{},{boxes:r});case"restart":return x;default:return e}};!function(e){e[e.placingBoxes=0]="placingBoxes",e[e.pickingBoxes=1]="pickingBoxes",e[e.complete=2]="complete"}(y||(y={}));var E=function(e,t){switch(t.type){case"startPicking":return y.pickingBoxes;case"completeGame":return y.complete;case"restart":return y.placingBoxes;default:return e}},P={statusText:"",gameState:y.placingBoxes,wms:O,pickingLists:[["MIC 099","MWO 901","DSC 743"],["WSH 322"],["SMX 041","OTV 482","CAM 679"],["SMK 019","BAT 917"],["VAC 082"],["SPK 876","PTV 555","DLA 413"],["IRN 590"],["BAM 223"],["DSC 743","MIC 099"],["DLA 413"],["DLA 413"],["SMK 019","BAT 917","RFG 411"],["IRN 590"],["DLA 413","VAC 082"],["PTV 555","SPK 876"],["SMK 019","BAT 917"],["VIR 555"],["CAM 679","IRN 590"],["BAM 223"],["IRN 590"],["BAM 223","VAC 082"],["SMK 019","BAT 917"],["VIR 555"],["VIR 555"],["CAM 679","BAM 223"],["SPK 876","PTV 555"]].map((function(e){return{orderNo:Math.random().toString().slice(2,9),products:e}})),warehouse:x,muted:"true"===localStorage.getItem("muted"),time:0},M=function(e,t){switch(t.type){case"setStatusText":return t.text;default:return e}},B=function(e,t){switch(t.type){case"setMuted":return localStorage.setItem("muted",t.value?"true":"false"),t.value;default:return e}},I=function(e,t){switch(t.type){case"tick":return performance.now()-t.start;default:return e}},L=Object(a.createContext)({state:P,dispatch:function(){return null}}),A=function(e,t){return{gameState:E(e.gameState,t),statusText:M(e.statusText,t),wms:e.wms,pickingLists:w(e.pickingLists,t),warehouse:C(e.warehouse,t),muted:B(e.muted,t),time:I(e.time,t)}},R=function(e){var t=e.children,n=Object(a.useReducer)(A,P),o=Object(i.a)(n,2),c=o[0],u=o[1];return r.a.createElement(L.Provider,{value:{state:c,dispatch:u}},t)},T=n(66),N=n(16);T.a.registerPIXI(d),N.a.registerPlugin(T.a);var D,V=function(e){var t=e.location,n=void 0===t?[0,0]:t,o=e.tileWidth,c=void 0===o?0:o,i=e.tileHeight,u=void 0===i?0:i,s=e.behindWall,m=e.selected,f=Object(a.useRef)(null),p=Object(a.useRef)(null),g=Object(a.useRef)(null),h=Object(a.useRef)(),v=Object(a.useRef)(),b=Object(a.useMemo)((function(){return{x:n[0]*c,y:n[1]*u}}),[n,c,u]),y=b.x,O=b.y,j=function(t){v.current=t.data,t.currentTarget.zIndex=4,t.stopPropagation(),e.onClick&&e.onClick(t),h.current=v.current.getLocalPosition(f.current),p.current.visible=!1,g.current.visible=!0},S=function(t){e.behindWall?t.currentTarget.zIndex=3:t.currentTarget.zIndex=1,v.current=void 0,e.onReleased&&e.onReleased(t),p.current.visible=!0,g.current.visible=!1},w=function(t){if(v.current&&f.current){var n=v.current.getLocalPosition(f.current.parent),a=new d.Point(n.x-h.current.x,n.y-h.current.y);f.current.position=a,e.onDragged&&e.onDragged(t)}},k="".concat("/sku-game","/images/box1").concat(e.behindWall?"b":"",".png");return r.a.createElement(l.Container,Object.assign({},e,{x:y,y:O,ref:f,zIndex:e.behindWall?3:1,mousedown:j,touchstart:j,mouseup:S,mouseupoutside:S,mousemove:w,touchmove:w}),m&&r.a.createElement(l.Graphics,{draw:function(e){e.clear(),e.lineStyle(2,16763904),s?e.drawRect(2,u/2-1,c-4,u/2+2):e.drawRect(2,-u/2-1,c-4,u+2),e.endFill()}}),r.a.createElement(l.Sprite,{anchor:s?[0,-.5]:[0,.5],image:k,ref:p}),r.a.createElement(l.Sprite,{name:"ghost",anchor:s?[0,-.5]:[0,.5],alpha:.9,image:"".concat("/sku-game","/images/box1.png"),ref:g,visible:!1}))},F=Object(l.PixiComponent)("SpriteAnimated",{create:function(e){var t=e.textures;return new d.AnimatedSprite(t||[],!0)},applyProps:function(e,t,n){Object(l.applyDefaultProps)(e,t,n),e.gotoAndPlay(0)}});!function(e){e.front="front",e.left="left",e.right="right",e.back="back"}(D||(D={}));var W=Object(a.forwardRef)((function(e,t){var n=e.atlas,o=e.carryBox,c=Object(u.a)(e,["atlas","carryBox"]),s=Object(a.useState)(null),m=Object(i.a)(s,2),f=m[0],p=m[1],g=Object(a.useState)(D.right),h=Object(i.a)(g,2),v=h[0],b=h[1],y=Object(l.useApp)(),O=Object(a.useRef)();if(Object(l.useTick)((function(){if(t&&t.current){var e=t.current.position,n=O.current;if(n&&!n.equals(e)){var a=Math.atan2(e.y-n.y,e.x-n.x);a>=Math.PI/-4&&a<=0||a>=0&&a<=Math.PI/4?b(D.right):a>=Math.PI/4&&a<=.75*Math.PI?b(D.front):a>.75*Math.PI||a<-.75*Math.PI?b(D.left):b(D.back)}O.current=e.clone()}})),Object(a.useEffect)((function(){y.loader.onComplete.once((function(){var e=y.loader.resources[n].data.frames,t=Object.keys(e).reduce((function(e,t){var n=t.substring(0,t.length-1);return e[n]||(e[n]=[]),e[n].push(d.Texture.from(t)),e}),{});p(t)})),y.loader.loading||y.loader.add(n).load()}),[y.loader,y.loader.loading,n,e.name]),!f)return null;var j=f["".concat(v).concat(o?"-box":"")];return r.a.createElement(l.Container,Object.assign({ref:t,zIndex:2},c),r.a.createElement(F,{animationSpeed:.15,isPlaying:!0,textures:j,anchor:[0,.1]}),!1)})),z=n(5);T.a.registerPIXI(d),N.a.registerPlugin(T.a);var K=function(e){return{x:e[0],y:e[1]}},H=function(e){var t=e.dispatch,n=e.pickingList,o=e.aStar,c=e.homeLocation,l=e.tileSize,s=e.getProductLocation,d=Object(u.a)(e,["dispatch","pickingList","aStar","homeLocation","tileSize","getProductLocation"]),m=Object(a.useRef)(null),f=Object(a.useState)(!1),p=Object(i.a)(f,2),g=p[0],h=p[1],v=Object(a.useRef)(c),b=Object(a.useRef)();return Object(a.useEffect)((function(){if(m.current&&n){var e=n.orderNo,a=n.products.find((function(e){return!(n.pickedProducts||[]).includes(e)})),r=a||"home";if(!b.current||b.current!==r){b.current=a||r,N.a.killTweensOf(m.current);var i=N.a.timeline(),u=K(v.current||c);if(a){var d=s(a),f=d.location,p=d.far,g=(null===o||void 0===o?void 0:o.findPath(u,K(f)))||[];g.forEach((function(e){i.to(m.current,{ease:z.b.easeNone,pixi:{x:e[0]*l,y:e[1]*l},duration:1/28+(p?.035:0)})})),i.to(m.current,{delay:p?.2:0,onComplete:function(){h(!0),t({type:"completeProductPick",productCode:a,orderNo:e});var n=g[g.length-1];v.current=n}})}else{((null===o||void 0===o?void 0:o.findPath(u,K(c)))||[]).forEach((function(e){i.to(m.current,{ease:z.b.easeNone,pixi:{x:e[0]*l,y:e[1]*l},duration:1/28})})),i.to(m.current,{onComplete:function(){h(!1),v.current=c,t({type:"completeOrder",orderNo:e})}})}}}}),[o,t,s,c,n,l,e.name]),r.a.createElement(W,Object.assign({atlas:"".concat("/sku-game","/images/sprites/guy/guy.json"),x:c[0]*l,y:c[1]*l,carryBox:g},d,{ref:m}))},X=n(17);n(33);T.a.registerPIXI(d),N.a.registerPlugin(T.a),window.PIXI=d;var U=function(e){var t=e.tilemap,n=e.width,o=e.height,c=Object(u.a)(e,["tilemap","width","height"]),m=Object(a.useContext)(L),f=m.state,g=m.dispatch,h=f.warehouse,v=Object(a.useState)(),b=Object(i.a)(v,2),O=b[0],j=b[1],S=Object(a.useState)([]),w=Object(i.a)(S,2),k=w[0],x=w[1],C=Object(a.useState)([]),E=Object(i.a)(C,2),P=E[0],M=E[1],B=Object(a.useState)([]),I=Object(i.a)(B,2),A=I[0],R=I[1],T=Object(a.useState)([]),D=Object(i.a)(T,2),F=D[0],W=D[1],z=Object(a.useState)(),K=Object(i.a)(z,2),U=K[0],J=K[1],Y=Object(a.useRef)(null),$="".concat("/sku-game","/").concat(t);Object(a.useEffect)((function(){(new d.Loader).add($).load((function(e){var t=e.resources[$].data;j(t)}))}),[$]);var Q=$.substr(0,$.lastIndexOf("/"));Object(a.useEffect)((function(){X.a.add("snap","".concat("/sku-game","/sound/snap.wav")),X.a.add("whoosh","".concat("/sku-game","/sound/whoosh.mp3")),X.a.add("bennyHill","".concat("/sku-game","/sound/BennyHill.mp3"))}),[]),Object(a.useEffect)((function(){f.gameState!==y.pickingBoxes||f.muted?X.a.stop("bennyHill"):X.a.play("bennyHill")}),[f.gameState,f.muted]);var Z=Object(a.useCallback)((function(e){return k.find((function(t){return t[0]===e[0]&&t[1]===e[1]}))}),[k]),_=Object(a.useCallback)((function(e){return A.find((function(t){return t[0]===e[0]&&t[1]===e[1]}))}),[A]),ee=function(e){var t=f.warehouse.boxes[e].location,n=!!P.find((function(e){return e[0]===t[0]&&e[1]===t[1]}));return{location:t,far:n}},te=Object(a.useCallback)((function(e){return(null===O||void 0===O?void 0:O.tilewidth)&&O.tileheight?[Math.floor(e.x/(null===O||void 0===O?void 0:O.tilewidth)),Math.floor(e.y/(null===O||void 0===O?void 0:O.tileheight))]:[0,0]}),[O]),ne=function(e){var t=Object.entries(h.boxes).find((function(t){var n=Object(i.a)(t,2),a=(n[0],n[1]);return a.location[0]===e[0]&&a.location[1]===e[1]}));if(t)return t[0]},ae=Object(a.useCallback)((function(e){return F.some((function(t){return t[0]===e[0]&&t[1]===e[1]}))}),[F]),re=Object(a.useMemo)((function(){if(!O||!F.length)return null;for(var e=[],t=0;t<O.height;t++){for(var n=[],a=0;a<O.width;a++){var r=ae([a,t]);n.push(r?1:0)}e.push(n)}return new s.AStarFinder({grid:{matrix:e},diagonalAllowed:!1,includeStartNode:!1,heuristic:"Manhatten",weight:0})}),[O,ae,F]),oe=Object(a.useState)(),ce=Object(i.a)(oe,2),ie=ce[0],ue=ce[1],le=Object(a.useState)(),se=Object(i.a)(le,2),de=se[0],me=se[1],fe=Object(a.useState)(),pe=Object(i.a)(fe,2),ge=pe[0],he=pe[1];Object(a.useEffect)((function(){if(f.gameState===y.pickingBoxes){J(void 0);var e=f.pickingLists.find((function(e,t){return!e.complete&&t%3===0}));ue(e);var t=f.pickingLists.find((function(e,t){return!e.complete&&t%3===1}));me(t);var n=f.pickingLists.find((function(e,t){return!e.complete&&t%3===2}));he(n),e||t||n||g({type:"completeGame"})}}),[g,f.gameState,f.pickingLists]);return r.a.createElement(l.Stage,{width:n,height:o},r.a.createElement(l.Container,Object.assign({ref:Y,interactive:!0,hitArea:new d.RoundedRectangle(0,0,n,o,0),sortableChildren:!0},c),O&&r.a.createElement(r.a.Fragment,null,r.a.createElement(p,{basePath:Q,data:O,setRackLocations:x,setRackFarLocations:M,setDockLocations:R,setWallLocations:W}),O&&F.length?Object.entries(h.boxes).map((function(t){var n=Object(i.a)(t,2),a=n[0],o=n[1];return r.a.createElement(V,{location:o.location,tileWidth:O.tilewidth,tileHeight:O.tileheight,selected:a===U,onClick:function(t){return n=a,e.onProductClick(n),void J(n);var n},onDragged:function(e){return function(e,t){var n=t.data.global,a=te(n),r=Z(a)||_(a),o=16777215;if(r){var c=ne(r);o=c&&c!==e?16724736:65328}G(t.currentTarget,o)}(a,e)},onReleased:function(e){return function(e,t){var n=t.data.global,a=te(n);G(t.currentTarget,16777215);var r=Z(a),o=_(a),c=r||o;if(c){var i=ne(c);if(!i||i===e){var u=!!r;return i===e||f.muted||X.a.play("snap"),void g({type:"placeBox",productCode:e,location:c,inRack:u})}}var l=h.boxes[e],s=l.location[0]*O.tilewidth,d=l.location[1]*O.tileheight;f.muted||X.a.play("whoosh"),N.a.to(t.currentTarget,{duration:.5,ease:"bounce.out",pixi:{x:s,y:d}})}(a,e)},key:a,behindWall:q(o.location,F),interactive:f.gameState===y.placingBoxes})})):null,re?r.a.createElement(r.a.Fragment,null,r.a.createElement(H,{name:"guy1",pickingList:ie,homeLocation:[9,12],tileSize:O.tilewidth,getProductLocation:ee,dispatch:g,aStar:re,visible:f.gameState===y.pickingBoxes}),r.a.createElement(H,{name:"guy2",pickingList:de,homeLocation:[10,12],tileSize:O.tilewidth,getProductLocation:ee,dispatch:g,aStar:re,visible:f.gameState===y.pickingBoxes}),r.a.createElement(H,{name:"guy3",pickingList:ge,homeLocation:[11,12],tileSize:O.tilewidth,getProductLocation:ee,dispatch:g,aStar:re,visible:f.gameState===y.pickingBoxes})):null)))},G=function(e,t){var n=e.children.find((function(e){return"ghost"===e.name}));n&&(n.tint=t)},q=function(e,t){return t.some((function(t){return t[0]===e[0]&&t[1]===e[1]+1}))},J=(n(60),function(e){var t=Object(a.useRef)(null),n=Object(a.useContext)(L).state.wms;Object(a.useEffect)((function(){if(t.current){var n=t.current,a=n.querySelector('tr[data-code="'.concat(e.selectedProduct,'"]'));return null===a||void 0===a||a.classList.add("highlight"),null===a||void 0===a||a.scrollIntoView({block:"end"}),function(){var e;null===(e=n.querySelector(".highlight"))||void 0===e||e.classList.remove("highlight")}}}),[e.selectedProduct]);var o=function(e){return r.a.createElement("tr",{key:e.productCode,"data-code":e.productCode},r.a.createElement("td",null,e.productCode),r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.slotting||""))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"SKU velocity profile"),r.a.createElement("table",{ref:t},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3,className:"category-header-a"},"A. Fast-moving")),n.filter((function(e){return e.category===m.A})).map((function(e){return o(e)})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3,className:"category-header-b"},"B. Medium-moving")),n.filter((function(e){return e.category===m.B})).map((function(e){return o(e)})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3,className:"category-header-c"},"C. Slow-moving")),n.filter((function(e){return e.category===m.C})).map((function(e){return o(e)})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3,className:"category-header-d"},"D. Not-moving")),n.filter((function(e){return e.category===m.D})).map((function(e){return o(e)})))))}),Y=function(){var e=Object(a.useContext)(L).state,t=e.pickingLists,n=e.wms.reduce((function(e,t){return e[t.productCode]||(e[t.productCode]=t.description),e}),{}),o=function(e){return r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3},"Order no: ",e.orderNo)),e.products.map((function(t){return c(e,t)}))))},c=function(e,t){var a,o=null===(a=e.pickedProducts)||void 0===a?void 0:a.some((function(e){return e===t}));return r.a.createElement("tr",{key:t,className:o?"completed":""},r.a.createElement("td",null),r.a.createElement("td",null,t),r.a.createElement("td",null,n[t]))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Picking lists"),t.map((function(e){return r.a.createElement("div",{key:e.orderNo},o(e))})))},$=function(e){var t=Object(a.useContext)(L).state.gameState;return r.a.createElement("div",{className:"ipad"},r.a.createElement("div",{className:"content"},function(){switch(t){case y.placingBoxes:return r.a.createElement(J,{selectedProduct:e.selectedProduct});case y.pickingBoxes:return r.a.createElement(Y,null)}}()))},Q=(n(61),function(){var e=Object(a.useContext)(L),t=e.state,n=e.dispatch;switch(t.gameState){case y.placingBoxes:return r.a.createElement("button",{onClick:function(){switch(t.gameState){case y.placingBoxes:if(!!Object.values(t.warehouse.boxes).some((function(e){return!e.inRack})))return void n({type:"setStatusText",text:"First place all goods in the warehouse!"});n({type:"startPicking"});break;case y.complete:location.reload()}},className:"start-button"},r.a.createElement("h1",null,"Start"));default:return null}}),Z=(n(62),function(){var e=Object(a.useContext)(L),t=e.state,n=e.dispatch,o=t.statusText,c=t.time;if(Object(a.useEffect)((function(){var e,a=performance.now();if(t.gameState===y.pickingBoxes){e=setInterval((function(){n({type:"tick",start:a})}),100)}return function(){clearTimeout(e)}}),[n,t.gameState]),t.gameState===y.pickingBoxes){var i=Math.min(c/45e3,1),u=c>3e4?"#f63a0f":"#86e01e";return r.a.createElement("div",{className:"status"},r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"progress-bar",style:{width:"".concat(100*i,"%"),backgroundColor:u}}),r.a.createElement("div",{className:"text"},_(c))))}return r.a.createElement("div",{className:"status"},o)}),_=function(e){var t=e/1e3,n=Math.floor(t/3600);t%=3600;var a=Math.floor(t/60);return t%=60,n>0?"".concat(ee(n),":").concat(ee(a),":").concat(t.toFixed(1).padStart(4,"0")):"".concat(ee(a),":").concat(t.toFixed(1).padStart(4,"0"))},ee=function(e){return"".concat(e).padStart(2,"0")},te=(n(63),function(){var e=Object(a.useContext)(L),t=e.state,n=e.dispatch;return r.a.createElement("div",{className:"settings"},r.a.createElement("input",{type:"checkbox",onChange:function(e){n({type:"setMuted",value:!e.target.checked})},checked:!1===t.muted}),r.a.createElement("label",null,"Sound on"))}),ne=(n(64),function(){var e=Object(a.useContext)(L),t=e.state,n=e.dispatch;return t.gameState!==y.complete?null:r.a.createElement("div",{className:"gameover-screen"},r.a.createElement("div",{className:"text"},r.a.createElement("h1",null,"Game over!"),"Your time: ",_(t.time),r.a.createElement("div",{className:"button"},r.a.createElement("button",{onClick:function(){n({type:"restart"})}},"Try again?"))))});window.PIXI=d;var ae=function(){var e=Object(a.useState)(),t=Object(i.a)(e,2),n=t[0],o=t[1];return r.a.createElement(R,null,r.a.createElement("div",{className:"App"},r.a.createElement(te,null),r.a.createElement(U,{tilemap:"scenes/level1.json",width:672,height:416,onProductClick:o}),r.a.createElement($,{selectedProduct:n}),r.a.createElement(Q,null),r.a.createElement(Z,null),r.a.createElement(ne,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.4d492ec6.chunk.js.map