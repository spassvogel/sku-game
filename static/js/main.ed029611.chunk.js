(this["webpackJsonpsku-game22"]=this["webpackJsonpsku-game22"]||[]).push([[0],{38:function(e,t,n){e.exports=n(67)},43:function(e,t,n){},44:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a,r,c,o=n(0),i=n.n(o),l=n(34),u=n.n(l),s=(n(43),n(10)),d=(n(44),n(20)),m=n(11),f=n(36);!function(e){e.tilelayer="tilelayer",e.objectgroup="objectgroup"}(a||(a={})),function(e){e.orthagonal="orthagonal",e.isometric="isometric",e.staggered="staggered",e.hexagonal="hexagonal"}(r||(r={})),function(e){e.rightUp="right-up",e.rightDown="right-down",e.leftUp="left-up",e.leftDown="left-down"}(c||(c={}));var p=n(7);window.PIXI=p;var g,h=Object(m.PixiComponent)("RectTileLayer",{create:function(e){return n(33),new window.PIXI.tilemap.CompositeRectTileLayer(0,[e.texture])},applyProps:function(e,t,n){var a=n.layer,r=n.tileset,c=n.horizontalTiles,o=n.spritesheet;if(a.data)for(var i=0;i<a.data.length;i++){var l=r.tilewidth,u=r.tileheight,s=i%c*l,d=Math.floor(i/c)*u;if(a.data[i]>0){var m="".concat(r.name,"-").concat(a.data[i]);e.addFrame(o.textures[m],s,d)}}}}),b=function(e){var t=e.basePath,n=e.data,r=e.setObjects,c=e.setWallLocations,l=Object(o.useState)(),u=Object(s.a)(l,2),d=u[0],f=u[1],g=Object(o.useState)(),h=Object(s.a)(g,2),b=h[0];h[1];return Object(o.useEffect)((function(){var e=w(n),o=v(n),i=p.Texture.from("".concat(t,"/").concat(o.image)),l=p.BaseTexture.from("".concat(t,"/").concat(o.image)),u=new p.Spritesheet(l,e),s=[];u.parse((function(){var e=n.layers.filter((function(e){return e.visible})).map((function(e){return e.properties&&e.properties.some((function(e){return"wall"===e.name&&!0===e.value}))&&O(s,e,e.width),E(e,i,n.width,o,u)})),t=n.layers.find((function(e){return e.type===a.objectgroup}));if(t){var l=t.objects.reduce((function(e,t){var a=t.x,r=t.y,c=[a/n.tilewidth,r/n.tileheight-1];return e["".concat(c[0],",").concat(c[1])]=t,e}),{});r(l)}c(s),f(e)}))}),[t,n,r,c]),i.a.createElement(m.Container,null,d,b)},v=function(e){if(!e.tilesets.length)throw new Error("No tilesets found! Can't continue");if(e.tilesets.length>1&&console.warn("Found more than one tileset. But we currently only support one."),e.tilesets[0].source)throw new Error("Please embed tilemaps in Tiled! Can't continue");return e.tilesets[0]},E=function(e,t,n,a,r){return i.a.createElement(h,{key:e.name,texture:t,layer:e,horizontalTiles:n,tileset:a,spritesheet:r})},w=function(e){for(var t=v(e),n=t.columns,a={},r=0;r<t.tilecount;r++){var c=t.tilewidth,o=t.tileheight,i=r%n*c,l=Math.floor(r/n)*o;a["".concat(t.name,"-").concat(r+1)]={frame:{x:i,y:l,w:c,h:o},spriteSourceSize:{x:i,y:l,w:c,h:o},rotated:!1,trimmed:!1,sourceSize:{w:c,h:o}}}return{frames:a,meta:{image:t.image,size:{w:t.imagewidth,h:t.imageheight},scale:1}}},O=function(e,t,n){t.data.reduce((function(e,t,a){if(t>0){var r=a%n,c=Math.floor(a/n);e.push([r,c])}return e}),e)};!function(e){e.A="A",e.B="B",e.C="C",e.D="D"}(g||(g={}));var y,j=function(e,t){switch(t.type){case"setWMS":return t.wms;default:return e}},S=[{category:g.A,productCode:"IRN 590",description:"Clothes iron"},{category:g.A,productCode:"CAM 679",description:"Digital camera"},{category:g.A,productCode:"SMK 019",description:"Smoke detector",pair:"BAT 917"},{category:g.A,productCode:"BAT 917",description:"Battery charger",pair:"SMK 019"},{category:g.B,productCode:"VRL 444",description:"VR headset"},{category:g.B,productCode:"PTV 555",description:"Plasma TV",pair:"SPK 876"},{category:g.B,productCode:"SPK 876",description:"Speaker system",pair:"PTV 555"},{category:g.C,productCode:"WSH 322",description:"Washing machine"},{category:g.C,productCode:"RFG 411",description:"Refrigerator"},{category:g.C,productCode:"SMX 041",description:"Stand mixer"},{category:g.D,productCode:"TPH 255",description:"Telephone"},{category:g.D,productCode:"CST 964",description:"Cassette player"}],x=n(37),C=n(14),k=function(e,t){switch(t.type){case"setPickingLists":return t.pickingLists;case"startPicking":return e.map((function(e){return e.orderNo===t.orderNo?Object(C.a)(Object(C.a)({},e),{},{guy:t.guy}):e}));case"completeProductPick":return e.map((function(e){return e.orderNo===t.orderNo?Object(C.a)(Object(C.a)({},e),{},{pickedProducts:[].concat(Object(x.a)(e.pickedProducts||[]),[t.productCode])}):e}));case"completeOrder":return e.map((function(e){return e.orderNo===t.orderNo?Object(C.a)(Object(C.a)({},e),{},{complete:!0}):e}));case"restart":return e.map((function(e){return Object(C.a)(Object(C.a)({},e),{},{guy:void 0,complete:!1,pickedProducts:[]})}));default:return e}},P=n(15),N=function(e){var t=e.map((function(e){return e.productCode}));return t.sort((function(){return.5-Math.random()})),t.reduce((function(e,t,n){return e[t]={location:[8+n,1]},e}),{})},T={boxes:N(S)},M=function(e,t,n){switch(t.type){case"cheat":return{boxes:{"IRN 590":{location:[16,8],zone:"A"},"CAM 679":{location:[17,8],zone:"A"},"BAT 917":{location:[16,6],zone:"A"},"SMK 019":{location:[17,6],zone:"A"},"VRL 444":{location:[11,8],zone:"B"},"PTV 555":{location:[11,6],zone:"B"},"SPK 876":{location:[12,6],zone:"B"},"WSH 322":{location:[6,8],zone:"C"},"SMX 041":{location:[7,8],zone:"C"},"RFG 411":{location:[6,6],zone:"C"},"TPH 255":{location:[1,6],zone:"D"},"CST 964":{location:[1,8],zone:"D"}}};case"placeBox":var a=t.location,r=t.zone,c=Object(C.a)(Object(C.a)({},e.boxes),{},Object(P.a)({},t.productCode,Object(C.a)(Object(C.a)({},e.boxes[t.productCode]),{},{location:a,zone:r})));return Object(C.a)(Object(C.a)({},e),{},{boxes:c});case"restart":return{boxes:N(n)};default:return e}};!function(e){e[e.intro=0]="intro",e[e.placingBoxes=1]="placingBoxes",e[e.pickingBoxes=2]="pickingBoxes",e[e.complete=3]="complete"}(y||(y={}));var A,B,R=function(e,t){switch(t.type){case"intro":return y.intro;case"startGame":return y.placingBoxes;case"startPicking":return y.pickingBoxes;case"completeGame":return y.complete;case"restart":return y.placingBoxes;default:return e}},L={statusText:"",gameState:y.intro,wms:S,pickingLists:(A=[["IRN 590","CAM 679"],["CAM 679","VRL 444","IRN 590"],["RFG 411","IRN 590","CAM 679"],["VRL 444","SMK 019","BAT 917","SPK 876","PTV 555"],["SMX 041","PTV 555","SPK 876","CAM 679"],["BAT 917","SMK 019","IRN 590","WSH 322"]],A.map((function(e){return{orderNo:Math.random().toString().slice(2,9),products:e}}))),warehouse:T,muted:"true"===localStorage.getItem("muted"),time:0},I=function(e,t){switch(t.type){case"setStatusText":return t.text;default:return e}},D=function(e,t){switch(t.type){case"setMuted":return localStorage.setItem("muted",t.value?"true":"false"),t.value;default:return e}},z=function(e,t){switch(t.type){case"tick":return performance.now()-t.start;default:return e}},W=Object(o.createContext)({state:L,dispatch:function(){return null}}),F=function(e,t){return{gameState:R(e.gameState,t),statusText:I(e.statusText,t),wms:j(e.wms,t),pickingLists:k(e.pickingLists,t),warehouse:M(e.warehouse,t,e.wms),muted:D(e.muted,t),time:z(e.time,t)}},_=function(e){var t=e.children,n=Object(o.useReducer)(F,L),a=Object(s.a)(n,2),r=a[0],c=a[1];return i.a.createElement(W.Provider,{value:{state:r,dispatch:c}},t)},H=n(68),K=n(17),G=(B={},Object(P.a)(B,g.A,15413795),Object(P.a)(B,g.B,2442883),Object(P.a)(B,g.C,15908162),Object(P.a)(B,g.D,12040119),B);H.a.registerPIXI(p),K.a.registerPlugin(H.a);var V,X=function(e){var t=e.location,n=void 0===t?[0,0]:t,a=e.tileWidth,r=void 0===a?0:a,c=e.tileHeight,l=void 0===c?0:c,u=e.behindWall,s=e.selected,d=Object(o.useRef)(null),f=Object(o.useRef)(null),g=Object(o.useRef)(null),h=Object(o.useRef)(),b=Object(o.useRef)(),v=Object(o.useMemo)((function(){return{x:n[0]*r,y:n[1]*l}}),[n,r,l]),E=v.x,w=v.y,O=function(t){b.current=t.data,t.currentTarget.zIndex=6,t.stopPropagation(),e.onClick&&e.onClick(t),h.current=b.current.getLocalPosition(d.current),f.current.visible=!1,g.current.visible=!0},y=function(t){e.behindWall?t.currentTarget.zIndex=3:t.currentTarget.zIndex=1,b.current=void 0,e.onReleased&&e.onReleased(t),f.current.visible=!0,g.current.visible=!1},j=function(t){if(b.current&&d.current){var n=b.current.getLocalPosition(d.current.parent),a=new p.Point(n.x-h.current.x,n.y-h.current.y);d.current.position=a,e.onDragged&&e.onDragged(t)}},S="".concat(".","/images/box1").concat(e.behindWall?"b":"",".png");return i.a.createElement(m.Container,Object.assign({},e,{x:E,y:w,ref:d,zIndex:e.behindWall?3:1,mousedown:O,touchstart:O,mouseup:y,mouseupoutside:y,touchend:y,mousemove:j,touchmove:j}),s&&i.a.createElement(m.Graphics,{draw:function(t){var n=G[e.product.category];t.clear(),t.lineStyle(2,n),u?t.drawRect(2,l/2-1,r-4,l/2+2):t.drawRect(2,-l/2-1,r-4,l+2),t.endFill()}}),i.a.createElement(m.Sprite,{anchor:u?[0,-.5]:[0,.5],image:S,ref:f}),i.a.createElement(m.Sprite,{name:"ghost",anchor:u?[0,-.5]:[0,.5],alpha:.9,image:"".concat(".","/images/box1.png"),ref:g,visible:!1}))},U=Object(m.PixiComponent)("SpriteAnimated",{create:function(e){var t=e.textures;return new p.AnimatedSprite(t||[],!0)},applyProps:function(e,t,n){Object(m.applyDefaultProps)(e,t,n),e.gotoAndPlay(0)}});!function(e){e.front="front",e.left="left",e.right="right",e.back="back"}(V||(V={}));var q=Object(o.forwardRef)((function(e,t){var n=e.atlas,a=e.carryBox,r=Object(d.a)(e,["atlas","carryBox"]),c=Object(o.useState)(null),l=Object(s.a)(c,2),u=l[0],f=l[1],g=Object(o.useState)(V.right),h=Object(s.a)(g,2),b=h[0],v=h[1],E=Object(m.useApp)(),w=Object(o.useRef)();if(Object(m.useTick)((function(){if(t&&t.current){var e=t.current.position,n=w.current;if(n&&!n.equals(e)){var a=Math.atan2(e.y-n.y,e.x-n.x);a>=Math.PI/-4&&a<=0||a>=0&&a<=Math.PI/4?v(V.right):a>=Math.PI/4&&a<=.75*Math.PI?v(V.front):a>.75*Math.PI||a<-.75*Math.PI?v(V.left):v(V.back)}w.current=e.clone()}})),Object(o.useEffect)((function(){E.loader.onComplete.once((function(){var e=E.loader.resources[n].data.frames,t=Object.keys(e).reduce((function(e,t){var n=t.substring(0,t.length-1);return e[n]||(e[n]=[]),e[n].push(p.Texture.from(t)),e}),{});f(t)})),E.loader.loading||E.loader.add(n).load()}),[E.loader,E.loader.loading,n,e.name]),!u)return null;var O=u["".concat(b).concat(a?"-box":"")];return i.a.createElement(m.Container,Object.assign({ref:t,zIndex:2},r),i.a.createElement(U,{animationSpeed:.15,isPlaying:!0,textures:O,anchor:[0,.1]}),!1)})),J=Object(o.memo)(q),Y=n(5);H.a.registerPIXI(p),K.a.registerPlugin(H.a);var $=function(e){return{x:e[0],y:e[1]}},Q=Object(o.memo)((function(e){var t=e.dispatch,n=e.pickingList,a=e.aStar,r=e.homeLocation,c=e.tileSize,l=e.getProductLocation,u=Object(d.a)(e,["dispatch","pickingList","aStar","homeLocation","tileSize","getProductLocation"]),m=Object(o.useRef)(null),f=Object(o.useState)(!1),p=Object(s.a)(f,2),g=p[0],h=p[1],b=Object(o.useRef)(r),v=Object(o.useRef)();return Object(o.useEffect)((function(){if(m.current&&n){var e=n.orderNo,o=n.products.find((function(e){return!(n.pickedProducts||[]).includes(e)})),i=o||"home";if(!v.current||v.current!==i){v.current=o||i,K.a.killTweensOf(m.current);var u=K.a.timeline(),s=$(b.current||r);if(o){var d=l(o),f=d.location,p=d.far,g=(null===a||void 0===a?void 0:a.findPath(s,$(f)))||[];g.forEach((function(e){u.to(m.current,{ease:Y.b.easeNone,pixi:{x:e[0]*c,y:e[1]*c},duration:.1+(p?.035:0)})})),u.to(m.current,{delay:p?.2:0,onComplete:function(){h(!0),t({type:"completeProductPick",productCode:o,orderNo:e});var n=g[g.length-1];b.current=n}})}else{((null===a||void 0===a?void 0:a.findPath(s,$(r)))||[]).forEach((function(e){u.to(m.current,{ease:Y.b.easeNone,pixi:{x:e[0]*c,y:e[1]*c},duration:.1})})),u.to(m.current,{onComplete:function(){h(!1),b.current=r,t({type:"completeOrder",orderNo:e})}})}}}}),[a,t,l,r,n,c,e.name]),i.a.createElement(J,Object.assign({atlas:"".concat(".","/images/sprites/guy/guy.json"),x:r[0]*c,y:r[1]*c,carryBox:g},u,{ref:m}))})),Z=n(18);n(33);H.a.registerPIXI(p),K.a.registerPlugin(H.a),window.PIXI=p;var ee=function(e){var t=e.tilemap,n=e.width,a=e.height,r=Object(d.a)(e,["tilemap","width","height"]),c=Object(o.useContext)(W),l=c.state,u=c.dispatch,g=l.warehouse,h=Object(o.useState)(),v=Object(s.a)(h,2),E=v[0],w=v[1],O=Object(o.useState)(),j=Object(s.a)(O,2),S=j[0],x=j[1],C=Object(o.useState)([]),k=Object(s.a)(C,2),P=k[0],N=k[1],T=Object(o.useState)(),M=Object(s.a)(T,2),A=M[0],B=M[1],R=Object(o.useRef)(null),L="".concat(".","/").concat(t);Object(o.useEffect)((function(){(new p.Loader).add(L).load((function(e){var t=e.resources[L].data;w(t)}))}),[L]);var I=L.substr(0,L.lastIndexOf("/"));Object(o.useEffect)((function(){Z.a.add("snap","".concat(".","/sound/snap.wav")),Z.a.add("whoosh","".concat(".","/sound/whoosh.mp3")),Z.a.add("bennyHill","".concat(".","/sound/BennyHill.mp3"))}),[]),Object(o.useEffect)((function(){l.gameState!==y.pickingBoxes||l.muted?Z.a.stop("bennyHill"):Z.a.play("bennyHill")}),[l.gameState,l.muted]);var D=Object(o.useCallback)((function(e){return null===S||void 0===S?void 0:S["".concat(e[0],",").concat(e[1])]}),[S]),z=function(e){return{location:l.warehouse.boxes[e].location,far:!1}},F=Object(o.useCallback)((function(e){return(null===E||void 0===E?void 0:E.tilewidth)&&E.tileheight?[Math.floor(e.x/(null===E||void 0===E?void 0:E.tilewidth)),Math.floor(e.y/(null===E||void 0===E?void 0:E.tileheight))]:[0,0]}),[E]),_=function(e){var t=Object.entries(g.boxes).find((function(t){var n=Object(s.a)(t,2),a=(n[0],n[1]);return a.location[0]===e[0]&&a.location[1]===e[1]}));if(t)return t[0]},H=Object(o.useCallback)((function(e){return P.some((function(t){return t[0]===e[0]&&t[1]===e[1]}))}),[P]),G=Object(o.useMemo)((function(){if(!E||!P.length)return null;for(var e=[],t=0;t<E.height;t++){for(var n=[],a=0;a<E.width;a++){var r=H([a,t]);n.push(r?1:0)}e.push(n)}return new f.AStarFinder({grid:{matrix:e},diagonalAllowed:!1,includeStartNode:!1,heuristic:"Manhatten",weight:0})}),[E,H,P]),V=Object(o.useState)(),U=Object(s.a)(V,2),q=U[0],J=U[1],Y=Object(o.useState)(),$=Object(s.a)(Y,2),ee=$[0],ae=$[1],re=Object(o.useState)(),ce=Object(s.a)(re,2),oe=ce[0],ie=ce[1];Object(o.useEffect)((function(){if(l.gameState===y.pickingBoxes){B(void 0);var e=l.pickingLists.find((function(e,t){return!e.complete&&t%3===0}));J(e);var t=l.pickingLists.find((function(e,t){return!e.complete&&t%3===1}));ae(t);var n=l.pickingLists.find((function(e,t){return!e.complete&&t%3===2}));ie(n),e||t||n||u({type:"completeGame"})}}),[u,l.gameState,l.pickingLists]);return i.a.createElement(m.Stage,{width:n,height:a},i.a.createElement(m.Container,Object.assign({ref:R,interactive:!0,hitArea:new p.RoundedRectangle(0,0,n,a,0),sortableChildren:!0},r),E&&i.a.createElement(i.a.Fragment,null,i.a.createElement(b,{basePath:I,data:E,setObjects:x,setWallLocations:N}),i.a.createElement(i.a.Fragment,null,i.a.createElement(m.Sprite,{x:127,y:383,image:"".concat(".","/images/sprites/floor/inbound.png")}),i.a.createElement(m.Sprite,{x:544,y:383,image:"".concat(".","/images/sprites/floor/outbound.png")})),E&&P.length?Object.entries(g.boxes).map((function(t){var n=Object(s.a)(t,2),a=n[0],r=n[1],c=l.wms.find((function(e){return e.productCode===a}));return i.a.createElement(X,{location:r.location,product:c,tileWidth:E.tilewidth,tileHeight:E.tileheight,selected:a===A,onClick:function(t){return function(t,n){e.onProductClick(t);var a=l.wms.find((function(e){return e.productCode===t}));u({type:"setStatusText",text:"Selected: ".concat(a.description," (").concat(t,")")}),B(t)}(a)},onDragged:function(e){return function(e,t){var n=t.data.global,a=F(n),r=D(a),c=16777215;if("rack"===(null===r||void 0===r?void 0:r.type)){var o=_(a);c=o&&o!==e?16724736:65328}te(t.currentTarget,c)}(a,e)},onReleased:function(e){return function(e,t){var n=t.data.global,a=F(n);te(t.currentTarget,16777215);var r=D(a);if(r){var c=_(a);if(!c||c===e){var o,i;c===e||l.muted||Z.a.play("snap");var s=null===r||void 0===r||null===(o=r.properties)||void 0===o||null===(i=o.find((function(e){return"zone"===e.name})))||void 0===i?void 0:i.value;return void u({type:"placeBox",productCode:e,location:a,zone:s})}}var d=g.boxes[e],m=d.location[0]*E.tilewidth,f=d.location[1]*E.tileheight;l.muted||Z.a.play("whoosh"),K.a.to(t.currentTarget,{duration:.5,ease:"bounce.out",pixi:{x:m,y:f}})}(a,e)},key:a,behindWall:ne(r.location,P),interactive:l.gameState===y.placingBoxes})})):null,G?i.a.createElement(i.a.Fragment,null,i.a.createElement(Q,{name:"guy1",pickingList:q,homeLocation:[17,12],tileSize:E.tilewidth,getProductLocation:z,dispatch:u,aStar:G,visible:l.gameState===y.pickingBoxes}),i.a.createElement(Q,{name:"guy2",pickingList:ee,homeLocation:[18,12],tileSize:E.tilewidth,getProductLocation:z,dispatch:u,aStar:G,visible:l.gameState===y.pickingBoxes}),i.a.createElement(Q,{name:"guy3",pickingList:oe,homeLocation:[19,12],tileSize:E.tilewidth,getProductLocation:z,dispatch:u,aStar:G,visible:l.gameState===y.pickingBoxes})):null)))},te=function(e,t){var n=e.children.find((function(e){return"ghost"===e.name}));n&&(n.tint=t)},ne=function(e,t){return t.some((function(t){return t[0]===e[0]&&t[1]===e[1]+1}))},ae=(n(60),function(e){var t=Object(o.useRef)(null),n=Object(o.useContext)(W).state.wms;Object(o.useEffect)((function(){if(t.current){var n=t.current;return n.querySelectorAll('tr[data-code="'.concat(e.selectedProduct,'"]')).forEach((function(e){e.classList.add("highlight"),e.scrollIntoView({block:"end"})})),function(){n.querySelectorAll(".highlight").forEach((function(e){e.classList.remove("highlight")}))}}}),[e.selectedProduct]);var a=function(e){var t,n=(t={},Object(P.a)(t,g.A,"cat-a"),Object(P.a)(t,g.B,"cat-b"),Object(P.a)(t,g.C,"cat-c"),Object(P.a)(t,g.D,"cat-d"),t);return i.a.createElement(o.Fragment,{key:e.productCode},i.a.createElement("tr",{key:e.productCode,"data-code":e.productCode,className:n[e.category]},i.a.createElement("td",null,e.productCode),i.a.createElement("td",null,e.description)),e.pair&&i.a.createElement("tr",{key:"".concat(e.productCode,"-pair"),"data-code":e.productCode,className:n[e.category]},i.a.createElement("td",{colSpan:2,className:"pair"}," Frequently sold with ".concat(e.pair))))};return i.a.createElement(i.a.Fragment,null,i.a.createElement("h2",null,"SKU velocity profile"),i.a.createElement("table",{ref:t},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("th",{colSpan:2,className:"category-header-a"},"A. Fast-moving")),n.filter((function(e){return e.category===g.A})).map((function(e){return a(e)})),i.a.createElement("tr",null,i.a.createElement("th",{colSpan:2,className:"category-header-b"},"B. Medium-moving")),n.filter((function(e){return e.category===g.B})).map((function(e){return a(e)})),i.a.createElement("tr",null,i.a.createElement("th",{colSpan:2,className:"category-header-c"},"C. Slow-moving")),n.filter((function(e){return e.category===g.C})).map((function(e){return a(e)})),i.a.createElement("tr",null,i.a.createElement("th",{colSpan:2,className:"category-header-d"},"D. Not-moving")),n.filter((function(e){return e.category===g.D})).map((function(e){return a(e)})))))}),re=function(){var e=Object(o.useContext)(W).state,t=e.pickingLists,n=e.wms.reduce((function(e,t){return e[t.productCode]||(e[t.productCode]=t.description),e}),{}),a=function(e){return i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",{colSpan:3},"Order no: ",e.orderNo)),e.products.map((function(t){return r(e,t)}))))},r=function(e,t){var a,r=null===(a=e.pickedProducts)||void 0===a?void 0:a.some((function(e){return e===t}));return i.a.createElement("tr",{key:t,className:r?"completed":""},i.a.createElement("td",null),i.a.createElement("td",null,t),i.a.createElement("td",null,n[t]))};return i.a.createElement(i.a.Fragment,null,i.a.createElement("h2",null,"Picking lists"),t.map((function(e){return i.a.createElement("div",{key:e.orderNo},a(e))})))},ce=function(e){var t=Object(o.useContext)(W).state.gameState;return i.a.createElement("div",{className:"ipad",style:{backgroundImage:"url(".concat(".","/images/ui/ipad.png)")}},i.a.createElement("div",{className:"content"},function(){switch(t){case y.placingBoxes:return i.a.createElement(ae,{selectedProduct:e.selectedProduct});case y.pickingBoxes:case y.complete:return i.a.createElement(re,null)}}()))},oe=(n(61),function(){var e=Object(o.useContext)(W),t=e.state,n=e.dispatch;switch(t.gameState){case y.placingBoxes:return i.a.createElement("button",{onClick:function(){switch(t.gameState){case y.placingBoxes:if(!!Object.values(t.warehouse.boxes).some((function(e){return!e.zone})))return void n({type:"setStatusText",text:"First place all goods in the warehouse!"});n({type:"startPicking"});break;case y.complete:location.reload()}},className:"start-button"},i.a.createElement("h1",null,"Complete"));default:return null}}),ie=(n(62),function(){var e=Object(o.useContext)(W),t=e.state,n=e.dispatch,a=t.statusText,r=t.time;if(Object(o.useEffect)((function(){var e,a=performance.now();if(t.gameState===y.pickingBoxes){e=setInterval((function(){n({type:"tick",start:a})}),100)}return function(){clearTimeout(e)}}),[n,t.gameState]),t.gameState===y.pickingBoxes){var c=Math.min(r/45e3,1),l=r>3e4?"#f63a0f":"#86e01e";return i.a.createElement("div",{className:"status"},i.a.createElement("div",{className:"progress"},i.a.createElement("div",{className:"progress-bar",style:{width:"".concat(100*c,"%"),backgroundColor:l}}),i.a.createElement("div",{className:"text"},le(r))))}return i.a.createElement("div",{className:"status"},a)}),le=function(e){var t=e/1e3,n=Math.floor(t/3600);t%=3600;var a=Math.floor(t/60);return t%=60,n>0?"".concat(ue(n),":").concat(ue(a),":").concat(t.toFixed(1).padStart(4,"0")):"".concat(ue(a),":").concat(t.toFixed(1).padStart(4,"0"))},ue=function(e){return"".concat(e).padStart(2,"0")},se=(n(63),function(){var e=Object(o.useContext)(W),t=e.state,n=e.dispatch;return window.cheat=function(){n({type:"cheat"})},i.a.createElement("div",{className:"settings"},i.a.createElement("input",{type:"checkbox",onChange:function(e){n({type:"setMuted",value:!e.target.checked})},checked:!1===t.muted}),i.a.createElement("label",null,"Sound on"))}),de=(n(64),Object(o.memo)((function(){var e=Object(o.useContext)(W),t=e.state,n=e.dispatch,a=Object(o.useState)(!1),r=Object(s.a)(a,2),c=r[0],l=r[1];Object(o.useEffect)((function(){t.gameState===y.pickingBoxes&&setTimeout(l,1e4,!0)}),[t.gameState]);var u=0,d=Object(o.useMemo)((function(){return t.wms.filter((function(e){return e.pair})).reduce((function(e,t){var n=e.find((function(e){return e.indexOf(t.pair)>-1}));return n?n[1]=t.productCode:e.push([t.productCode,""]),e}),[])}),[t.wms]);if(!c)return null;var m=function(e,n){var a=0,r=0;t.wms.forEach((function(e){e.category===n&&(r++,t.warehouse.boxes[e.productCode].zone===n.toString()&&a++)}));var c=a;return u+=c,i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,"".concat(e," ")),i.a.createElement("div",null,"".concat(c," placed correct")),i.a.createElement("div",null,"".concat(c,"/").concat(r)))};return i.a.createElement("div",{className:"gameover-screen"},i.a.createElement("h1",null,"Scoreboard"),i.a.createElement("div",{className:"modal"},i.a.createElement("div",{className:"table"},i.a.createElement("div",{className:"table-header"},"Products"),i.a.createElement("div",{className:"table-header"},"Result"),i.a.createElement("div",{className:"table-header"},"Score"),m("Fast moving products",g.A),m("Medium moving products",g.B),m("Slow moving products",g.C),d.map((function(e){return function(e){var n=t.warehouse.boxes[e[0]].location,a=t.warehouse.boxes[e[1]].location,r=0;return 1===Math.abs(n[0]-a[0])&&n[1]===a[1]?(u+=r=3,i.a.createElement(o.Fragment,{key:e.toString()},i.a.createElement("div",null,"Pair: ","".concat(e)),i.a.createElement("div",null,"Placed next to each other"),i.a.createElement("div",null,"".concat(r,"/3")))):i.a.createElement(o.Fragment,{key:e.toString()},i.a.createElement("div",null,"Pair: ","".concat(e)),i.a.createElement("div",null,"Not placed next to each other"),i.a.createElement("div",null,"".concat(r,"/3")))}(e)})),function(){var e=0;t.wms.filter((function(e){return e.category===g.D})).forEach((function(n){t.warehouse.boxes[n.productCode].zone!==g.D.toString()&&e++})),t.wms.filter((function(e){return e.category!==g.D})).forEach((function(n){t.warehouse.boxes[n.productCode].zone===g.D.toString()&&e++}));var n=-5*e;return u+=n,i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,"Non moving products"),i.a.createElement("div",null,"".concat(e," mistakes made")),i.a.createElement("div",null,"".concat(n)))}(),i.a.createElement("div",{className:"table-footer summary"},16===u?i.a.createElement("span",{className:"success"},"Good job! You reduced the travel time in the warehouse by choosing the most optimum storage locations for the goods."):i.a.createElement("span",{className:"fail"},"Oh no! The storage locations you chose for the goods are not optimum and increased the travel time in the warehouse.")),i.a.createElement("div",{className:"table-footer"},"Total:",i.a.createElement("b",null,u)))),i.a.createElement("button",{onClick:function(){l(!1),n({type:"restart"})},className:"button"},"Try again?"))}))),me=(n(65),Object(o.memo)((function(){var e=Object(o.useContext)(W),t=e.state,n=e.dispatch;return t.gameState!==y.intro?null:i.a.createElement("div",{className:"intro-screen"},i.a.createElement("h1",null,"SKU is the word!"),i.a.createElement("div",{className:"modal"},i.a.createElement("div",{className:"text"},"The warehouse needs to be filled! Consult the WMS to know what goes where."),i.a.createElement("div",{className:"trilogy"},i.a.createElement("div",null,i.a.createElement("img",{src:"".concat(".","/images/intro/intro-1.png"),alt:"docking area"}),i.a.createElement("p",null,"Take the boxes from the outside area. Check the contents on the WMS.")),i.a.createElement("div",null,i.a.createElement("img",{src:"".concat(".","/images/intro/intro-2.png"),alt:"docking area"}),i.a.createElement("p",null,"Place the boxes in the racks in the warehouse. Note the distance of the racks to the outbound area.")),i.a.createElement("div",null,i.a.createElement("img",{src:"".concat(".","/images/intro/intro-3.png"),alt:"docking area"}),i.a.createElement("p",null,"Some products will not be sold. Place them outside in the discard area.")))),i.a.createElement("button",{onClick:function(){n({type:"startGame"})},className:"button"},"Start"))})));n(66);function fe(){return(fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function pe(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ge=i.a.createElement("defs",null,i.a.createElement("style",null,".a{fill:#fff;}.a,.b{stroke:#283583;stroke-linecap:round;stroke-linejoin:round;stroke-width:0.75px;}.b{fill:none;}")),he=i.a.createElement("title",null,"Back"),be=i.a.createElement("circle",{className:"a",cx:15.02,cy:15.02,r:14.65}),ve=i.a.createElement("path",{className:"b",d:"M11.64,16",transform:"translate(-0.97 -0.93)"}),Ee=i.a.createElement("path",{className:"b",d:"M11.63,16",transform:"translate(-0.97 -0.93)"}),we=i.a.createElement("path",{className:"b",d:"M20.38,22.88",transform:"translate(-0.97 -0.93)"}),Oe=i.a.createElement("line",{className:"b",x1:19.39,y1:8.16,x2:10.65,y2:15.02}),ye=i.a.createElement("line",{className:"b",x1:19.39,y1:21.98,x2:10.65,y2:15.11}),je=function(e){var t=e.svgRef,n=e.title,a=pe(e,["svgRef","title"]);return i.a.createElement("svg",fe({width:30.04,height:30.04,viewBox:"0 0 30.04 30.04",ref:t},a),ge,void 0===n?he:n?i.a.createElement("title",null,n):null,be,ve,Ee,we,Oe,ye)},Se=i.a.forwardRef((function(e,t){return i.a.createElement(je,fe({svgRef:t},e))})),xe=(n.p,function(e){var t=e.gameDataReceived,n=function(e){if(window.hasOwnProperty("webkit")&&window.webkit.hasOwnProperty("messageHandlers")){var t=JSON.stringify(e);webkit.messageHandlers.cordova_iab.postMessage(t)}else window.parent.postMessage(e,"*")};return Object(o.useEffect)((function(){if(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_PLAYER_MODE){window.setGameData=function(e){n({type:"setGameData",data:e})},window.GAMEDATA=null,window.getGameData=function(){return window.GAMEDATA},window.addEventListener("message",(function(e){e.data&&e.data.hasOwnProperty("userId")&&(window.GAMEDATA=e.data,t(e.data))}),!1)}}),[t]),Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_PLAYER_MODE?i.a.createElement("div",{className:"close"},i.a.createElement(Se,{onClick:function(){n({type:"exit"})}})):null});window.PIXI=p;var Ce=function(){var e=Object(o.useState)(),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(o.useRef)(null);return Object(o.useEffect)((function(){var e=function(){if(window.innerWidth-960<0||window.innerHeight-480<0){var e=1;e=window.innerWidth-960<window.innerHeight-480?window.innerWidth/960:window.innerHeight/480,r.current.style.transform="scale(".concat(e,") translate(-50%, -50%)")}else r.current.style.transform="translate(-50%, -50%)"};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(_,null,i.a.createElement(ke,null),i.a.createElement("div",{className:"App",ref:r},i.a.createElement(se,null),i.a.createElement(ee,{tilemap:"scenes/level2.json",width:672,height:416,onProductClick:a}),i.a.createElement(ce,{selectedProduct:n}),i.a.createElement(oe,null),i.a.createElement(ie,null),i.a.createElement(me,null),i.a.createElement(de,null))))},ke=function(){var e=Object(o.useContext)(W).dispatch;return i.a.createElement(xe,{gameDataReceived:function(t){t.content.wms&&e({type:"setWMS",wms:t.content.wms}),t.content.pickingLists&&e({type:"setPickingLists",pickingLists:t.content.pickingLists}),e({type:"restart"}),e({type:"intro"})}})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.ed029611.chunk.js.map